<html>
  <head>
    <meta charset="utf-8" />
<meta name="description" content="" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>BiliBili Android第三方——第1步 | HaKuLess</title>
<link rel="shortcut icon" href="https://hakuless.github.io//favicon.ico?v=1557324967676">
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">
<link rel="stylesheet" href="https://hakuless.github.io//styles/main.css">

<script src="https://cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script>
<script src="https://cdn.bootcss.com/moment.js/2.23.0/moment.min.js"></script>


  </head>
  <body>
    <div class="main">
      <div class="main-content">
        <div class="site-header">
  <a href="https://hakuless.github.io/">
  <img class="avatar" src="https://hakuless.github.io//images/avatar.png?v=1557324967676" alt="">
  </a>
  <h1 class="site-title">
    HaKuLess
  </h1>
  <p class="site-description">
    温故而知新
  </p>
  <div class="menu-container">
    
      
        <a href="/" class="menu">
          首页
        </a>
      
    
      
        <a href="/archives" class="menu">
          归档
        </a>
      
    
      
        <a href="/tags" class="menu">
          标签
        </a>
      
    
      
        <a href="/post/about" class="menu">
          关于
        </a>
      
    
  </div>
  <div class="social-container">
    
      
    
      
    
      
    
      
    
      
    
  </div>
</div>

      
        <div class="post-detail">
          <article class="post">
            <h2 class="post-title">
              BiliBili Android第三方——第1步
            </h2>
            <div class="post-info">
              <time class="post-time">
                · 2016-02-06 ·
              </time>
              
                <a href="https://hakuless.github.io//tag/tech" class="post-tags">
                  # Tech
                </a>
              
                <a href="https://hakuless.github.io//tag/android" class="post-tags">
                  # Android
                </a>
              
            </div>
            
            <div class="post-content">
              <h3 id="架构选型">架构选型</h3>
<p>个人感觉现在的软件开发已经主要靠合理的利用、组合各种轮子来满足业务需求（没有轮子就要自己造轮子）。
我使用的是 Retrofit + Fresco + RxJava + ButterKnife + Gson，相信Android开发人员对这些第三方库都很熟悉，如果技能树点的时其他路线的可以看<a href="https://mp.weixin.qq.com/s?__biz=MzAwNDY1ODY2OQ==&amp;mid=400785752&amp;idx=1&amp;sn=e1c166e7fad0892811c9ca9bca6d1540">这篇文章</a>。</p>
<h4 id="网络请求">网络请求</h4>
<p>Retrofit的使用对于如今大行其道的RESTFUL的API来说简直就是舒服的不能再舒服了，记得在某处看到过一句话：</p>
<blockquote>
<p>如果后台使用标准的Restful API，那么使用Retrofit来处理网络请求，网络请求相关的代码量将减少80%</p>
</blockquote>
<p>Android网络请求库根据谷歌官方推荐即可，前段时间是Volley，现在是okHttp，使用Retrofit时默认选取okHttp作为底层网络请求实现。</p>
<h4 id="图片加载">图片加载</h4>
<p>图片加载库算是比较难以取舍的，之前流行的是UIL，而现在是Glide、Picasso和Fresco，在本人的<a href="https://github.com/HakuLess/AndroidRes">Github库</a>中使用后三者方式加载图片，可以看出三种都能较好满足需求，但同时也能明显感觉到Fresco的响应最快，并且Fresco支持的功能最多。有利就会有弊，Glide和Picasso都是可以直接依赖普通的ImageView进行使用，而Fresco则需要使用其自定义的SimpleDraweeView及其相关属性对ImageView进行操作，如scaleType等属性。对于没有特殊要求或限制的项目，本人建议使用Fresco作为图片加载库。</p>
<h4 id="rxjava">RxJava</h4>
<p>使用RxJava处理复杂的异步逻辑可以说是异常的舒服，看着之前用Handler实现功能的代码简直惨不忍睹。以一个简单的Banner(图片轮播)为例，使用RxJava实现无论从代码量还是逻辑上都是更加精简、清晰。使用timer、map、flatMap等各种操作符，非常容易实现想要的异步功能。其实之前的网络访问、图片加载只需要自己封装一层，即可按照自己舒服(习惯)的方式进行操作，而RxJava则是一种独立的编程风格，刚开始接触可能还需要适应一段时间，本人用了2个月感觉仍在磨合期，但却是义无反顾的推荐用其处理异步逻辑。并且，RxJava可以和Retrofit无缝链接，直接异步请求接收数据，回调后进行一系列的异步处理，并能够智能各处理步骤所处的线程，UI的归UI、计算的归计算、IO的归IO，大大提升App的流畅度。</p>
<h4 id="其他使用">其他使用</h4>
<ul>
<li>ButterKnife的功能很单一，就是通过自定义注解的方式绑定控件ID、点击事件等，但却非常好用，配合Android Studio的插件，几乎是最常用的操作之一。</li>
<li>Gson作为google官方的json解析库，灵巧好用，无副作用。json解析库无论选择哪种感觉都可以充分满足需求。</li>
<li>RecyclerView已经可以完全替代ListView和GridView，现在项目中所有列表的实现都可以基于RecyclerView。</li>
</ul>
<h4 id="未使用">未使用</h4>
<ul>
<li>EventBus 事件总线 未详细了解，不评论</li>
<li>Dagger2 依赖注入 未详细了解，不评论</li>
<li>MVP/MVVM 不喜欢（个人观点），与后台千篇一律的逻辑不通（数据库 + 增删改查 + 组合业务逻辑），App中有许多比较特殊的用户交互，而使用MV*这种形式确实可以规范代码，但其带来的大量的中间层代码（冗余的文件、类、方法）是我极为排斥的。Android本身的Activity、Fragment、View、Adapter只要合理组织、运用，一样能够实现较好的易维护的代码。</li>
</ul>
<h3 id="总结">总结</h3>
<p>个人对架构的理解、甚至对编程的理解就是尽量少写代码，或者短期内看上去会增加些代码量，但长期会减少正体的代码量。目前，Android开发仍是软件开发最热的部分之一，虽然已有许多成熟的框架给我们使用，但仍有更大量的需求待大家完善、开发（指开源、成熟的解决方案），如复杂动画的实现。本篇文章主要介绍自己在这个项目中使用到的第三方库，希望能够帮助大家。</p>
<h5 id="参考文章">参考文章</h5>
<ul>
<li><a href="http://www.jianshu.com/p/943ceaccfdff">Architecting Android with RxJava</a></li>
<li><a href="http://gank.io/post/560e15be2dca930e00da1083#toc_1">RxJava详解</a></li>
<li><a href="https://mp.weixin.qq.com/s?__biz=MzAwNDY1ODY2OQ==&amp;mid=400785752&amp;idx=1&amp;sn=e1c166e7fad0892811c9ca9bca6d1540">提升Android开发效率</a></li>
<li><a href="https://github.com/futurice/android-best-practices">Android最佳实践</a></li>
</ul>

            </div>
          </article>
        </div>
    
        
          <div class="next-post">
            <div class="next">下一篇</div>
            <a href="https://hakuless.github.io//post/bilibili-android-di-san-fang-di-0-bu">
              <h3 class="post-title">
                BiliBili Android第三方——第0步
              </h3>
            </a>
          </div>  
        

        
    
        <div class="site-footer">
  Powered by <a href="https://github.com/getgridea/gridea" target="_blank">Gridea</a>
</div>

<script>
  hljs.initHighlightingOnLoad()
</script>

      </div>
    </div>
  </body>
</html>
