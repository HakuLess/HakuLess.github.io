
<!DOCTYPE html>
<html>
  <head>
    
<meta charset="utf-8" >

<title>1340. Jump Game V —— 题解 | HaKuLess</title>
<meta name="description" content="精神病人思路广，脑残儿童欢乐多">

<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.7.0/animate.min.css">

<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">
<link rel="shortcut icon" href="https://hakuless.github.io//favicon.ico?v=1584001547319">
<link rel="stylesheet" href="https://hakuless.github.io//styles/main.css">



<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
<script src="https://cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script>



  </head>
  <body>
    <div id="app" class="main">
      <div class="site-header-container">
  <div class="site-header">
    <div class="left">
      <a href="https://hakuless.github.io/">
        <img class="avatar" src="https://hakuless.github.io//images/avatar.png?v=1584001547319" alt="" width="32px" height="32px">
      </a>
      <a href="https://hakuless.github.io/">
        <h1 class="site-title">HaKuLess</h1>
      </a>
    </div>
    <div class="right">
      <transition name="fade">
        <i class="icon" :class="{ 'icon-close-outline': menuVisible, 'icon-menu-outline': !menuVisible }" @click="menuVisible = !menuVisible"></i>
      </transition>
    </div>
  </div>
</div>

<transition name="fade">
  <div class="menu-container" style="display: none;" v-show="menuVisible">
    <div class="menu-list">
      
        
          <a href="/" class="menu purple-link">
            首页
          </a>
        
      
        
          <a href="/archives" class="menu purple-link">
            归档
          </a>
        
      
        
          <a href="/tags" class="menu purple-link">
            标签
          </a>
        
      
        
          <a href="/post/about" class="menu purple-link">
            关于
          </a>
        
      
    </div>
  </div>
</transition>


      <div class="content-container">
        <div class="post-detail">
          
            <div class="feature-container" style="background-image: url('https://assets.leetcode.com/uploads/2020/01/23/meta-chart.jpeg')">
            </div>
          
          <h2 class="post-title">1340. Jump Game V —— 题解</h2>
          <div class="post-info post-detail-info">
            <span><i class="icon-calendar-outline"></i> 2020-02-19</span>
            
              <span>
                <i class="icon-pricetags-outline"></i>
                
                  <a href="https://hakuless.github.io/tag/f92VwjICi/">
                    DP
                    
                      ，
                    
                  </a>
                
                  <a href="https://hakuless.github.io/tag/kXyJVahYw/">
                    Algorithm
                    
                  </a>
                
              </span>
            
          </div>
          <div class="post-content">
            <p>Contest 174的Q4，如上文所述，由于在Contest中耗费大量精力去搞Q3的 DFS to BFS结果导致两道题都没搞定... （还是太年轻~）<br>
Jump Game系列也来到了第五代，这一系列的题目都很经典，覆盖了贪心、BFS、DFS、DP等许多算法，下面让我们一起来看看这个第五代吧</p>
<!-- more -->
<h3 id="题目描述">题目描述</h3>
<p>给定一个整型数组arr和一个整数d，整型数组上的点代表这个点所在的高度，整数d代表人能够移动的最大横向距离。人可以从整型中的任意一个Index出发，到另一个index上，需要满足条件：</p>
<ol>
<li>只能在数组范围内移动，即我们的index只能在整型数组的indices中</li>
<li>单步移动的最大距离只能是d，即从当前移动的范围是[cur-d, cur+d]</li>
<li>移动目标 及 与当前目标的中间值 都要小于当前值（人只能向下跳，不能向上爬）<br>
求问，人最多能够移动几次？<br>
<img src="https://hakuless.github.io//post-images/1582102355985.jpeg" alt="" loading="lazy"><br>
如上图所述，以下为index值<br>
在d = 2时，10 -&gt; 8 -&gt; 6 -&gt; 7 因此结果是4<br>
在d = 3时，2 -&gt; 5 -&gt; 8 -&gt; 6 -&gt; 7 因此结果是5</li>
</ol>
<h3 id="题目分析">题目分析</h3>
<ol>
<li>某一Index的最优解是一定的，不因其他状态而改变</li>
<li>同时，当前状态的最优解，可以依赖于附近最多2*d个状态求解<br>
通过上述条件，可以发现一个精简的解法：DFS + Memo</li>
</ol>
<h3 id="解法一dfs-memo">解法一：DFS + Memo</h3>
<pre><code class="language-Kotlin">fun maxJumps(arr: IntArray, d: Int): Int {
    // 初始化DP数组，值代表在index位置上的最优解，-1为未求解状态
    val dp = IntArray(arr.size) { -1 }
    for (i in 0..arr.lastIndex) {
        helper(arr, dp, i, d)
    }
    return dp.max()!!
}

private fun helper(arr: IntArray, dp: IntArray, cur: Int, d: Int): Int {
    // 若已经有值，则直接返回结果，优化子问题
    if (dp[cur] != -1) {
        return dp[cur]
    }
    // 默认自己为1，仅能站在自己的位置上
    dp[cur] = 1
    // 向前跳
    for (i in cur - 1 downTo cur - d) {
        if (i !in dp.indices)
            break
        // 若中间遇到更高的则停止，无法跳跃
        if (arr[i] &gt;= arr[cur]) {
            break
        }
        // 查找子问题
        dp[cur] = maxOf(dp[cur], helper(arr, dp, i, d) + 1)
    }
    // 同理向后跳
    for (i in cur + 1..cur + d) {
        if (i !in dp.indices)
            break
        if (arr[i] &gt;= arr[cur]) {
            break
        }
        dp[cur] = maxOf(dp[cur], helper(arr, dp, i, d) + 1)
    }
    return dp[cur]
}
</code></pre>
<h3 id="解法二sort-dp">解法二：Sort + DP</h3>
<p>DP的动态方程大家比较好想，那就是dp[i] = maxOf(dp[i - d..i + d] + 1)，其中 (i - d) ~ (i + d)需要符合不跨越等高or更高的value，同时要求这些dp值已经是求好的值。<br>
那么，我们只需要从低到高排序后再去计算就能保障需要用到的值，肯定是已经算好了的，具体代码如下：</p>
<pre><code class="language-Kotlin">fun maxJumps(arr: IntArray, d: Int): Int {
    val sort = ArrayList&lt;Pair&lt;Int, Int&gt;&gt;()
    arr.forEachIndexed { index, i -&gt;
        sort.add(Pair(index, i))
    }
    sort.sortBy { it.second }
    val dp = IntArray(arr.size) { -1 }
    sort.forEach {
        var max = 1
        for (i in it.first + 1..it.first + d) {
            if (i !in arr.indices || arr[i] &gt;= it.second) {
                break
            }
            // 由于事先排序，这里的dp[i]可以保证都是有效的正数值
            max = maxOf(max, 1 + dp[i])
        }
        for (i in it.first - 1 downTo it.first - d) {
            if (i !in arr.indices || arr[i] &gt;= it.second) {
                break
            }
            max = maxOf(max, 1 + dp[i])
        }
        dp[it.first] = max
    }
    return dp.max()!!
}
</code></pre>

          </div>
        </div>

        
          <div class="next-post">
            <a class="purple-link" href="https://hakuless.github.io/post/1339-maximum-product-of-splitted-binary-tree-ti-jie/">
              <h3 class="post-title">
                下一篇：1339. Maximum Product of Splitted Binary Tree —— 题解
              </h3>
            </a>
          </div>
          
      </div>

      

      <div class="site-footer">
  <div class="slogan">精神病人思路广，脑残儿童欢乐多</div>
  <div class="social-container">
    
      
        <a href="https://github.com/HakuLess" target="_blank">
          <i class="fab fa-github"></i>
        </a>
      
    
      
    
      
    
      
    
      
    
  </div>
  Powered by <a href="https://github.com/getgridea/gridea" target="_blank">Gridea</a>
</div>


    </div>
    <script type="application/javascript">

hljs.initHighlightingOnLoad()

var app = new Vue({
  el: '#app',
  data: {
    menuVisible: false,
  },
})

</script>




  </body>
</html>
