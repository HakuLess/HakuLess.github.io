<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <id>https://hakuless.github.io/</id>
    <title>HaKuLess</title>
    <updated>2019-07-03T08:12:09.615Z</updated>
    <generator>https://github.com/jpmonette/feed</generator>
    <link rel="alternate" href="https://hakuless.github.io/"/>
    <link rel="self" href="https://hakuless.github.io//atom.xml"/>
    <subtitle>ç²¾ç¥ç—…äººæ€è·¯å¹¿ï¼Œè„‘æ®‹å„¿ç«¥æ¬¢ä¹å¤š</subtitle>
    <logo>https://hakuless.github.io//images/avatar.png</logo>
    <icon>https://hakuless.github.io//favicon.ico</icon>
    <rights>All rights reserved 2019, HaKuLess</rights>
    <entry>
        <title type="html"><![CDATA[1105. Filling Bookcase Shelves â€”â€” é¢˜è§£]]></title>
        <id>https://hakuless.github.io//post/1105-filling-bookcase-shelves-ti-jie</id>
        <link href="https://hakuless.github.io//post/1105-filling-bookcase-shelves-ti-jie">
        </link>
        <updated>2019-07-03T07:19:48.000Z</updated>
        <summary type="html"><![CDATA[<p>æœ¬å‘¨çŠ¶æ€ä¸é”™ï¼Œå¯æƒœå¥½å‡ å‘¨æ²¡æœ‰DPçš„é¢˜ï¼Œä¸€ä¸‹å¡ä½äº†...
https://leetcode.com/problems/filling-bookcase-shelves/</p>
]]></summary>
        <content type="html"><![CDATA[<p>æœ¬å‘¨çŠ¶æ€ä¸é”™ï¼Œå¯æƒœå¥½å‡ å‘¨æ²¡æœ‰DPçš„é¢˜ï¼Œä¸€ä¸‹å¡ä½äº†...
https://leetcode.com/problems/filling-bookcase-shelves/</p>
<!-- more -->
<h3 id="é¢˜ç›®å¤§æ„">é¢˜ç›®å¤§æ„</h3>
<p>ç»™å‡ºä¸€ç»„ä¹¦ï¼Œä¹¦æœ‰å®½ã€é«˜ï¼Œæ¶å­ä¹Ÿæœ‰å®½åº¦ï¼ŒæŒ‰ç…§é¡ºåºä»ä¸Šå‘ä¸‹æ‘†æ”¾ï¼Œé—®æ¶å­è‡³å°‘éœ€è¦å¤šé«˜æ‰èƒ½æŠŠä¹¦éƒ½æ”¾å®Œï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š
<img src="https://hakuless.github.io//post-images/1562138680833.png" alt="">
è¿™é‡Œéœ€è¦æ³¨æ„</p>
<ol>
<li>ä¹¦æ˜¯æŒ‰é¡ºåºæ”¾çš„ï¼Œæ‰€ä»¥4ã€5ã€6æ— æ³•æ”¾åˆ°1çš„å³ä¾§ï¼Œä¸å±äºè´ªå¿ƒ</li>
<li>æ¢è¡Œç­–ç•¥ï¼Œå¦‚2å¯ä»¥æ”¾åœ¨1çš„å³ä¾§ï¼Œä½†æ˜¯3å°±è¦å¦èµ·ä¸€è¡Œï¼Œç›¸å¯¹å ç”¨é«˜åº¦ä¼šæ›´å¤§</li>
</ol>
<h3 id="é¢˜è§£">é¢˜è§£</h3>
<p>ä½¿ç”¨åŠ¨æ€è§„åˆ’æ±‚è§£è¿™ç±» <strong>ä¸­é—´çŠ¶æ€</strong> &amp;&amp; <strong>ä¸‹ä¸€ä¸ªè¾“å…¥</strong> ç¡®å®š <strong>ä¸‹ä¸€ä¸ªçŠ¶æ€</strong> çš„é—®é¢˜
æœ¬é¢˜ä¸­ï¼Œå¦‚æœæ²¡æœ‰7çš„è¾“å…¥ï¼Œé‚£ä¹ˆé«˜åº¦ä¼šæ˜¯5ï¼Œè€Œæˆä¸º6åŸå› æ˜¯å‰6ä¸ªè¾“å…¥çš„ç»“æœ
ç¬¬7æœ¬ä¹¦å¯ä»¥ç‹¬ç«‹ä¸€è¡Œï¼Œor ä¸å‰è¾¹è¿ç»­çš„næœ¬ä¹¦ä¸€èµ·ä¸€è¡Œï¼ˆnä»0åˆ°6ï¼Œæ€»ä½“å®½åº¦ä¸å¯ä»¥å¤§äºæ¶å­å®½åº¦ï¼‰
é‚£ä¹ˆ å‰6æœ¬ä¹¦çš„æœ€å°é«˜åº¦ä¹Ÿå¯ä»¥ä¾ç…§è¯¥é€»è¾‘æ±‚å‡ºï¼Œå³æ¯ä¸ªçŠ¶æ€ä¸‹çš„æœ€å°é«˜åº¦ï¼Œæœ€åå¾—å‡ºåŠ¨æ€æ–¹ç¨‹ä¸º</p>
<pre><code>// nä»0å–åˆ°K-1ï¼Œç›´åˆ°å®ƒä»¬æ€»å®½åº¦å¤§äºæ¶å­å®½åº¦
dp[k] = minOf[dp[k], dp[k-n] + max[height{k-n..k}]]
</code></pre>
<p>å…·ä½“é¢˜è§£ä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="language-Kotlin">fun minHeightShelves(books: Array&lt;IntArray&gt;, shelf_width: Int): Int {
		val n = books.size
		val height = IntArray(n + 1)
		for (i in 0 until n) {
				var min = Int.MAX_VALUE
				var h = 0
				var w = 0
				for (j in i downTo 0) {
						h = maxOf(h, books[j][1])
						w += books[j][0]
						if (w &gt; shelf_width) break
						min = minOf(min, h + height[j])
				}
				height[i + 1] = min
		}
		return height[n]
}
</code></pre>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Union-Find Set]]></title>
        <id>https://hakuless.github.io//post/union-find-set</id>
        <link href="https://hakuless.github.io//post/union-find-set">
        </link>
        <updated>2019-05-25T03:51:03.000Z</updated>
        <summary type="html"><![CDATA[<h2 id="introduction">Introduction</h2>
<p>å¹¶æŸ¥é›†æ˜¯ä¸ªå¾ˆæœ‰æ„æ€çš„æ•°æ®ç»“æ„ï¼Œå®ƒçš„ä¸»è¦åŠŸèƒ½æ˜¯æŠŠä¸åŒçš„å…ƒç´  åˆ†ç»„ å¹¶ å…³è” èµ·æ¥ï¼Œèƒ½å¤Ÿåœ¨ O(1) æ—¶é—´å†…åˆ¤æ–­ä¸¤ä¸ªå…ƒç´ æ˜¯å¦åœ¨ä¸€ç»„é‡Œã€‚å…³ç³»å…·æœ‰ä¼ é€’æ€§çš„é—®é¢˜ï¼Œéƒ½å¯ä»¥åˆ©ç”¨å¹¶æŸ¥é›†å¤„ç†ã€‚</p>
]]></summary>
        <content type="html"><![CDATA[<h2 id="introduction">Introduction</h2>
<p>å¹¶æŸ¥é›†æ˜¯ä¸ªå¾ˆæœ‰æ„æ€çš„æ•°æ®ç»“æ„ï¼Œå®ƒçš„ä¸»è¦åŠŸèƒ½æ˜¯æŠŠä¸åŒçš„å…ƒç´  åˆ†ç»„ å¹¶ å…³è” èµ·æ¥ï¼Œèƒ½å¤Ÿåœ¨ O(1) æ—¶é—´å†…åˆ¤æ–­ä¸¤ä¸ªå…ƒç´ æ˜¯å¦åœ¨ä¸€ç»„é‡Œã€‚å…³ç³»å…·æœ‰ä¼ é€’æ€§çš„é—®é¢˜ï¼Œéƒ½å¯ä»¥åˆ©ç”¨å¹¶æŸ¥é›†å¤„ç†ã€‚</p>
 <!-- more -->
<h2 id="function">function</h2>
<p>å¹¶æŸ¥é›†çš„æ ¸å¿ƒä¸»è¦æ˜¯ä¸¤ä¸ªæ–¹æ³•ï¼Œä¸€ä¸ªæ˜¯æŸ¥æ‰¾ <strong>find(x)</strong>ï¼Œé€šè¿‡ä¼ å…¥å…ƒç´ ï¼Œè¿”å›å…ƒç´ æ‰€åœ¨ç»„çš„Keyï¼ˆä¸åŒå…ƒç´ è¿”å›çš„Keyå€¼ç›¸åŒï¼Œä»£è¡¨è¿™äº›å…ƒç´ åœ¨åŒä¸€ç»„é‡Œï¼‰ã€‚å¦ä¸€ä¸ªæ˜¯ <strong>union(x, y)</strong>ï¼Œå°†ä¸¤ä¸ªä¸åŒçš„å…ƒç´ åˆå¹¶ä¸ºä¸€ç»„ï¼ŒåŒæ—¶å±äºè¿™ä¸¤ç»„çš„æ•°æ®éƒ½åœ¨ä¸€ä¸ªå¤§ç»„å†…ã€‚</p>
<pre><code>class UnionFindSet:
	func UnionFindSet(n):
		parents = [1..n]
		rank = [0..0] (n zeros)
	
	func Find(x):
		if x != parents[x]:
			parents[x] = Find(parents[x])
		return parents[x]
		
	func Union(x, y):
		px, py = Find(x), Find(y)
		if ranks[px] &gt; ranks[py]: parents[py] = px
		if ranks[px] &lt; ranks[py]: parents[px] = py
		if ranks[px] == ranks[py]
			parents[py] = px
			ranks[px]++
</code></pre>
<p>ä¸Šé¢æ˜¯ä¼ªä»£ç ï¼Œæ³¨æ„åˆ°æœ‰ä¸¤ä¸ªéƒ¨åˆ†ï¼š</p>
<ol>
<li>find(x) é€šè¿‡é€’å½’ä¸€ç›´å‘ä¸Šå¯»æ‰¾ï¼Œå¹¶ä¸æ–­çš„èµ‹å€¼</li>
<li>union(x, y)è¿‡ç¨‹ï¼Œä¼šæ ¹æ® rankså€¼è¿›è¡Œæ¯”è¾ƒï¼Œç„¶åmergeæ–¹å¼ä¸åŒ</li>
</ol>
<h3 id="path-compression">Path Compression</h3>
<p>é¦–å…ˆï¼Œfindå¯»æ‰¾è¿‡ç¨‹ä¸­åŒæ—¶è¿›è¡Œ <strong>path compression</strong> ä¼˜åŒ–ï¼Œå¦‚å»ºç«‹å…³è”å…³ç³»æ—¶ï¼Œæ•´ä¸ªå…³è”å›¾çš„å…³ç³»éå¸¸çš„é•¿ï¼Œå¦‚ä¸‹å›¾ï¼š
<img src="https://hakuless.github.io//post-images/1558768567180.png" alt="">
å½“æˆ‘ä»¬è¦æŸ¥æ‰¾1æ‰€åœ¨ç»„æ—¶ï¼Œä¼šä¸€ç›´éå†åˆ°é“¾è¡¨å¤´ï¼Œä¼šéå¸¸è€—æ—¶ï¼Œå› æ­¤éœ€è¦åœ¨findè¿‡ç¨‹ä¸­è¿›è¡Œä¼˜åŒ–ï¼ŒæŠŠ1ã€2ã€3ã€5ï¼ˆæŸ¥æ‰¾çš„æ•°æ®åŠå…¶æ‰€æœ‰ç¥–å…ˆï¼‰å‡ç›´æ¥æŒ‡å‘8ï¼ˆClass IDï¼‰ï¼Œæ‹‰å¹³æˆ‘ä»¬çš„æ ‘ç»“æ„ï¼ˆflatten the structureï¼‰ï¼Œå˜æˆå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š
<img src="https://hakuless.github.io//post-images/1558768774411.png" alt="">
è¿™æ—¶å€™æˆ‘ä»¬å†æ¬¡æŸ¥æ‰¾æ—¶ï¼Œä¼šå¤§å¤§å‡å°‘éå†æ‰€éœ€æ—¶é—´</p>
<h3 id="union-by-rank">Union By Rank</h3>
<p>åˆå¹¶çš„è¿‡ç¨‹ï¼Œæˆ‘ä»¬é€šè¿‡Union By Rankæ¥è¿›è¡Œä¼˜åŒ–ï¼ŒåŸç†ä¸ä¸Šè¿°å†…å®¹ç±»ä¼¼ï¼Œå°±æ˜¯ä¸ºäº†å‡å°‘æˆ‘ä»¬æŸ¥æ‰¾è¿‡ç¨‹ä¸­çš„è€—æ—¶ã€‚ç”±äºæˆ‘ä»¬çš„mergeè¿‡ç¨‹å°±æ˜¯æŠŠä¸€ä¸ªç»„çš„æ ¹èŠ‚ç‚¹ç›´æ¥æŒ‡å‘å¦ä¸€ä¸ªç»„çš„æ ¹èŠ‚ç‚¹ï¼Œé‚£ä¹ˆå¦‚æœæŠŠä¸€ä¸ªå¾ˆå¤æ‚çš„ç»“æ„+åˆ°ä¸€ä¸ªç®€å•ç»“æ„ä¸Šï¼Œä¼šå¢åŠ æ•´ä¸ªæ ‘çš„æ·±åº¦ï¼Œåä¹‹åˆ™ä¸ä¼šå¢å¤§å¤æ‚åº¦ã€‚å› æ­¤æˆ‘ä»¬å°½é‡è®©æ·±åº¦å°çš„æ ‘ attach åˆ°æ·±åº¦å¤§çš„æ ‘ä¸Šï¼Œæ•ˆæœå¦‚ä¸‹å›¾ï¼š
<img src="https://hakuless.github.io//post-images/1558769263768.png" alt="ä¸¤ç»„è¿›è¡Œåˆå¹¶">
<img src="https://hakuless.github.io//post-images/1558769351883.png" alt="å°æ ‘attachå¤§æ ‘">
<img src="https://hakuless.github.io//post-images/1558769433973.png" alt="å¤§æ ‘attachå°æ ‘">
å¯ä»¥æ˜æ˜¾çœ‹å‡ºï¼Œå½“å¤§æ ‘attachå°æ ‘æ—¶ï¼Œå¤æ‚åº¦æ˜æ˜¾å¢åŠ ï¼Œé€šè¿‡ä¸€ä¸ªrankæ•°ç»„è®°å½•æ¯ä¸€æ¬¡åšæ·±èŠ‚ç‚¹çš„æ“ä½œï¼ˆRankå€¼ç›¸åŒçš„åˆå¹¶ï¼‰ï¼Œå¹¶ç”¨äºåˆ¤æ–­ä»¥åçš„unionæ“ä½œ</p>
<h2 id="leetcode">LeetCode</h2>
<h3 id="684-redundant-connection">684. Redundant Connection</h3>
<p>æ ‡å‡†çš„å¹¶æŸ¥é›†é¢˜ç›®ï¼Œç»™å‡ºä¸€ç»„æ— å‘å›¾çš„è¾¹ï¼Œæ‰¾åˆ°ç¬¬ä¸€ä¸ªä½¿æ— ç›¸åŒä¸­äº§ç”Ÿç¯çš„è¾¹ =&gt;
è½¬åŒ–ä¸º å°†ç»™å‡ºçš„è¾¹ï¼ŒæŒ‰é¡ºåºæŠŠæ‰€æœ‰çš„ç‚¹è¿›è¡Œåˆ†ç»„ï¼Œç›´åˆ°å‘ç°æŸæ¡è¾¹åœ¨æ·»åŠ ä¹‹å‰ï¼Œè¾¹çš„ä¸¤ä¸ªç‚¹å°±å·²ç»åœ¨ä¸€ç»„é‡Œäº†ï¼Œé‚£ä¹ˆæ­¤æ—¶è‹¥åŠ å…¥è¿™æ¡è¾¹ï¼Œå³ä¼šäº§ç”Ÿç¯ã€‚</p>
<pre><code>class Solution {
    fun findRedundantConnection(edges: Array&lt;IntArray&gt;): IntArray {
        val dsu = DSU(edges.size)
        for (i in 0 until edges.size) {
            val x = edges[i][0] - 1
            val y = edges[i][1] - 1
            if (dsu.find(x) == dsu.find(y)) {
                return intArrayOf(x + 1, y + 1)
            }
            dsu.union(x, y)

        }
        return intArrayOf()
    }
}
</code></pre>
<h3 id="547-friend-circles">547. Friend Circles</h3>
<p>è¿™ä¸ªæ•°æ®æ›´ç›´æ¥çš„å¹¶æŸ¥é›†é¢˜ç›®ï¼Œä»¥äºŒç»´æ•°ç»„å½¢å¼ ç»™å‡ºä¸€ä¸ªç­çº§åŒå­¦ä¹‹é—´çš„æœ‹å‹å…³ç³»ï¼Œ1æ˜¯æœ‹å‹ 0ä¸æ˜¯ï¼ŒåŒæ—¶ æœ‹å‹çš„æœ‹å‹ä¹Ÿæ˜¯æœ‹å‹ï¼ˆ...ï¼‰ï¼Œç„¶åç»™å‡ºæ•´ä¸ªç­çº§ä¸€å…±æœ‰å¤šå°‘çš„æœ‹å‹åœˆã€‚ã€‚ã€‚</p>
<pre><code>class Solution {
    fun findCircleNum(M: Array&lt;IntArray&gt;): Int {
        val size = M.size
        val dsu = DSU(size)
        for (i in 0 until size) {
            for (j in 0 until size) {
                if (M[i][j] == 1 &amp;&amp; i != j) {
                    dsu.union(i, j)
                }
            }
        }

        val ans = HashSet&lt;Int&gt;()
        for (i in 0 until size) {
            ans.add(dsu.find(i))
        }
        return ans.size
    }
}
</code></pre>
<p>è¿™é‡Œå°†æ‰€æœ‰çš„å…³ç³»ï¼Œå½•å…¥åˆ°å¹¶æŸ¥é›†ä¸­ï¼Œç„¶åéå†æ‰€æœ‰çš„å­¦ç”Ÿæ‰€å±çš„ç»„æ”¾åˆ°Seté‡Œï¼Œé‚£ä¹ˆSetçš„é•¿åº¦å°±æ˜¯æœ‹å‹åœˆçš„æ•°é‡</p>
<h3 id="947-most-stones-removed-with-same-row-or-column">947. Most Stones Removed with Same Row or Column</h3>
<p>ä¸€èˆ¬å¹¶æŸ¥é›†çš„å¾®å˜å½¢ï¼Œä¸€ä¸ªäºŒç»´æ£‹ç›˜ä¸Šï¼Œæ•£è½ç€ä¸€å †çŸ³å¤´ï¼ˆæ¯ä¸ªçŸ³å¤´ä¸€ä¸ªç‚¹ ä¸” ä¸ä¼šæœ‰é‡å¤ï¼‰ï¼Œç„¶åæˆ‘ä»¬å¯ä»¥ä¸€æ¬¡ä¸€ä¸ªçš„å–ä¸‹çŸ³å¤´ï¼ˆå¯¹çŸ³å¤´æœ‰è¦æ±‚ï¼Œéœ€è¦æœ‰å…¶ä»–çŸ³å¤´å’Œå–ä¸‹çš„çŸ³å¤´åœ¨åŒä¸€è¡Œ or åŒä¸€åˆ—ï¼Œå³è‡ªå·±å•ç‹¬ä¸€è¡Œ &amp; ä¸€åˆ— çš„çŸ³å¤´æ— æ³•å–ä¸‹ï¼Œå¤©ç…å­¤çŸ³ï¼‰
è¿™é‡Œï¼Œä¸€ç»„çš„å±æ€§æ˜¯ è¡Œæ•° or åˆ—æ•°ç›¸åŒï¼ŒSolutioné‡Œç»™å‡ºçš„æ–¹æ¡ˆæ˜¯æ ¹æ® <strong>Note</strong> ä¸­å…¥å‚çš„é™åˆ¶æ¥æŠŠ <em>åˆ—</em> è½¬æ¢ä¸º 10000+çš„ <em>è¡Œ</em> æ•°ï¼Œæˆ‘ä»¬è¿™é‡Œé‡‡ç”¨æ›´é€šç”¨çš„åŠæ³•ï¼Œé€šè¿‡ä¸€ä¸ªMapè½¬æ¢æˆ‘ä»¬çš„Class IDä¸æ•°æ®ï¼ˆIDä¸å±æ€§ä¸éœ€è¦æœ‰å¼ºå…³ç³»ï¼‰</p>
<pre><code>class Solution {
    fun removeStones(stones: Array&lt;IntArray&gt;): Int {
        val max = stones.size
        val ufs = TypedUFS&lt;IntArray&gt;(max)
        for (i in 0 until max) {
            for (j in i + 1 until max) {
                if (stones[i][0] == stones[j][0] || stones[i][1] == stones[j][1]) {
                    ufs.union(stones[i], stones[j])
                }
            }
        }

        val set = hashSetOf&lt;Int&gt;()
        stones.forEach {
            val root = ufs.typedFind(it)
            set.add(root)
        }

        return stones.size - set.size
    }
}

class TypedUFS&lt;T&gt;(var n: Int = 0) {
    val parent = IntArray(n) { i -&gt; i }
    val rank = IntArray(n)

    val map = hashMapOf&lt;T, Int&gt;()
    var total = 0

    fun typedFind(key: T): Int {
        var x = total
        if (map.containsKey(key)) {
            x = map[key]!!
        } else {
            map[key] = total
            total++
        }
        if (x != parent[x]) {
            parent[x] = find(parent[x])
        }
        return parent[x]
    }

    fun find(x: Int): Int {
        if (x != parent[x]) {
            parent[x] = find(parent[x])
        }
        return parent[x]
    }

    fun union(x: T, y: T): Boolean {
        val px = typedFind(x)
        val py = typedFind(y)
        if (px == py) {
            return false
        }
        when {
            rank[px] &gt; rank[py] -&gt; parent[py] = px
            rank[px] &lt; rank[py] -&gt; parent[px] = py
            else -&gt; {
                parent[px] = py
                rank[px]++
            }
        }
        return true
    }
}
</code></pre>
<p>æŠŠè¡Œã€åˆ—æœ‰ç›¸åŒæƒ…å†µçš„å…ƒç´ unionåœ¨ä¸€èµ·ï¼Œæ¯ä¸ªç»„éƒ½ä¼šç•™ä¸‹ä¸€ä¸ªå…ƒç´ ï¼Œå› æ­¤æˆ‘ä»¬èƒ½æœ‰æ‹¿èµ°çš„çŸ³å¤´çš„æœ€å¤§æ•°é‡å°±æ˜¯ çŸ³å¤´çš„æ•°é‡ å‡å» å¹¶æŸ¥é›†ç»„çš„æ•°é‡ï¼ˆä¸ä¹‹å‰æœ‹å‹åœˆçš„é¢˜ç›®ç›¸ä¼¼ï¼‰ã€‚è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨äº†ä¸€ä¸ª <strong>TypedUFS</strong> æ¥å¤„ç†éintç±»å‹çš„æºæ•°æ®ï¼Œmapæ¯æ¬¡åˆ†é…ä¸€ä¸ªæ–°å…ƒç´ ä¸€ä¸ªæ–°çš„Keyå€¼ï¼Œæœ€å¤§ç¨‹åº¦çš„å‡å°‘ <strong>parent</strong> ä¸ <strong>rank</strong> æ•°ç»„çš„é•¿åº¦ï¼ˆæœ€å¤§åªéœ€è¦æ•°æ®æºçš„é•¿åº¦ï¼Œè€Œéæ•°æ®æºçš„èŒƒå›´ï¼Œä¸Solutionçš„åŒºåˆ«ï¼‰</p>
<h2 id="å‚è€ƒèµ„æ–™">å‚è€ƒèµ„æ–™</h2>
<p><a href="https://zxi.mytechroad.com/blog/data-structure/sp1-union-find-set/">èŠ±èŠ±LeetCode</a>
<a href="https://en.wikipedia.org/wiki/Disjoint-set_data_structure">wiki</a></p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Binary Search]]></title>
        <id>https://hakuless.github.io//post/binary-search</id>
        <link href="https://hakuless.github.io//post/binary-search">
        </link>
        <updated>2019-05-23T08:05:53.000Z</updated>
        <summary type="html"><![CDATA[<h3 id="introduction">Introduction</h3>
<h4 id="what-is-binary-search">What is Binary Search</h4>
<p>Binary Search is one of the most fundamental and useful algorithms in Computer Science. It describes the process of search ing for a specific value in an ordered collection.</p>
]]></summary>
        <content type="html"><![CDATA[<h3 id="introduction">Introduction</h3>
<h4 id="what-is-binary-search">What is Binary Search</h4>
<p>Binary Search is one of the most fundamental and useful algorithms in Computer Science. It describes the process of search ing for a specific value in an ordered collection.</p>
<!-- more --> 
<blockquote>
<p>Terminology used in Binary Search</p>
<ul>
<li>Target - the value tha you are searching for</li>
<li>Index - the current location that you are searching</li>
<li>Left, Right - the indicies from which we use to maintain ouer search Space</li>
<li>Mid - the index that we use to apply a condition to determine if we should search left or right</li>
</ul>
</blockquote>
<h3 id="how-does-it-work">How does it work?</h3>
<p>In its simplest form, Binary Sarch operates ona contiguous sequence with a specified left and right index. This is called the Search Space. Binary Search maintains the left, right and middle indicies of the search space and compares the search target or applies the search condition to the middle value of the collection; if the condition is unsatisfied or values unequal, the half in which the target cannnot lie is eliminated and the search continues on the remaining half until it is successful. if the search ends with an empty half, the condition cannot be fulfilled and target is not found.</p>
<h3 id="binary-search-template-i">Binary Search Template I</h3>
<pre><code>int binarySearch(int[] nums, int target){
  if(nums == null || nums.length == 0)
    return -1;

  int left = 0, right = nums.length - 1;
  while(left &lt;= right){
    // Prevent (left + right) overflow
    int mid = left + (right - left) / 2;
    if(nums[mid] == target){ return mid; }
    else if(nums[mid] &lt; target) { left = mid + 1; }
    else { right = mid - 1; }
  }

  // End Condition: left &gt; right
  return -1;
}
</code></pre>
<h3 id="binary-search-template-ii">Binary Search Template II</h3>
<pre><code>int binarySearch(int[] nums, int target){
  if(nums == null || nums.length == 0)
    return -1;

  int left = 0, right = nums.length;
  while(left &lt; right){
    // Prevent (left + right) overflow
    int mid = left + (right - left) / 2;
    if(nums[mid] == target){ return mid; }
    else if(nums[mid] &lt; target) { left = mid + 1; }
    else { right = mid; }
  }

  // Post-processing:
  // End Condition: left == right
  if(left != nums.length &amp;&amp; nums[left] == target) return left;
  return -1;
}
</code></pre>
<h3 id="binary-search-template-iii">Binary Search Template III</h3>
<pre><code>int binarySearch(int[] nums, int target) {
    if (nums == null || nums.length == 0)
        return -1;

    int left = 0, right = nums.length - 1;
    while (left + 1 &lt; right){
        // Prevent (left + right) overflow
        int mid = left + (right - left) / 2;
        if (nums[mid] == target) {
            return mid;
        } else if (nums[mid] &lt; target) {
            left = mid;
        } else {
            right = mid;
        }
    }

    // Post-processing:
    // End Condition: left + 1 == right
    if(nums[left] == target) return left;
    if(nums[right] == target) return right;
    return -1;
}
</code></pre>
<h3 id="binary-search-template-analysis">Binary Search Template Analysis</h3>
<p>These 3 templates differ by their:</p>
<ul>
<li>left, mid, right index assignments</li>
<li>loop or recursive termination condition</li>
<li>necessity of post-processing</li>
</ul>
<h4 id="template-1-left-right">Template #1 <strong>(left &lt;= right)</strong></h4>
<ul>
<li>Most basic and elmentary form of Binary search</li>
<li>Search Condition can be determined without comparing to the element's neighbors (or use specific elements around it)</li>
<li>No post-precessing required becasuse at each step, you are checking to see if the element has been found. If you reach the end, then you know the element is not found</li>
</ul>
<h4 id="template-2-left-right">Template #2 <strong>(left &lt; right)</strong></h4>
<ul>
<li>An advanced way to implement Binary Search.</li>
<li>Search Condition needs to access element's immediate right neighbor</li>
<li>Use element's right neighbor to determine if condition is met and decide whether to go left or right</li>
<li>Gurantees Search Space is at least 2 in size at each step</li>
<li>Post-processing required. Loop/Recursion ends when you hava 1 element left. Need to assess if the remaining element meets the condition.</li>
</ul>
<h4 id="template-3-left-1-right">Template #3 <strong>(left + 1 &lt; right)</strong></h4>
<ul>
<li>An alternative way to implement Binary Search</li>
<li>Search Condition needs to access element's immediate left and right neighbors</li>
<li>Use element's neighbors to determine if condition is met and decide whether to go left or right</li>
<li>Gurantees Search Space is at least 3 in size at each step</li>
<li>Post-processing required. Loop/Recursion ends when you have 2 elements left. Need to assess if the remaining elements meet the condition.</li>
</ul>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[CSSåˆçº§å­¦ä¹ ]]></title>
        <id>https://hakuless.github.io//post/css-chu-ji-xue-xi</id>
        <link href="https://hakuless.github.io//post/css-chu-ji-xue-xi">
        </link>
        <updated>2019-05-16T02:24:37.000Z</updated>
        <summary type="html"><![CDATA[<p>å­¦ä¹ ä¸€ä¸‹CSSï¼Œå‰ç«¯è¦æ˜¯è¿è®¾è®¡ç¨¿éƒ½æ— æ³•å®ç°ï¼ŒåŸºæœ¬éœ€æ±‚éƒ½æ»¡è¶³ä¸äº†~</p>
]]></summary>
        <content type="html"><![CDATA[<p>å­¦ä¹ ä¸€ä¸‹CSSï¼Œå‰ç«¯è¦æ˜¯è¿è®¾è®¡ç¨¿éƒ½æ— æ³•å®ç°ï¼ŒåŸºæœ¬éœ€æ±‚éƒ½æ»¡è¶³ä¸äº†~</p>
<!-- more -->
<h2 id="cssè¯­æ³•">CSSè¯­æ³•</h2>
<h3 id="åŸºæœ¬è§„åˆ™">åŸºæœ¬è§„åˆ™</h3>
<p>CSSä¸»è¦ç”±ä¸¤éƒ¨åˆ†ç»„æˆï¼šé€‰æ‹©å™¨(selector) &amp; å£°æ˜(declarations)</p>
<pre><code>/* selector {property: value} */
h1 {color:red; font-size:14px;}
</code></pre>
<p><img src="https://hakuless.github.io//post-images/1557976004501.png" alt=""></p>
<h3 id="æ ·å¼è¡¨ä¹¦å†™">æ ·å¼è¡¨ä¹¦å†™</h3>
<p>ç›®å‰ï¼Œä¸»è¦é‡‡ç”¨å†…è”æ ·å¼è¡¨çš„ä¹¦å†™æ–¹æ¡ˆ</p>
<pre><code>&lt;!DOCTYPE html&gt;
&lt;html&gt;
  &lt;head&gt;
  &lt;/head&gt;
  &lt;body&gt;
  	&lt;h1 style=&quot;color:red; font-size:14px;&quot;&gt;&lt;/h1&gt;
  &lt;/body&gt;
&lt;/html&gt;
</code></pre>
<h3 id="è§„åˆ™">@è§„åˆ™</h3>
<p>é€šè¿‡@å¼€å¤´ï¼Œåæ¥æ ‡è¯†ç¬¦
ç›®å‰ç”¨çš„æ¯”è¾ƒå¤šçš„æ˜¯ @keyframesï¼Œé€šè¿‡å®šä¹‰å…³é”®å¸§å®ç°åŠ¨ç”»æ•ˆæœ</p>
<pre><code>/* @keyframes */
@keyframes slidein {
    from {
        margin-left: 100%;
        width: 300%;
    }

    to {
        margin-left: 0%;
        width: 100%;
    }
}
</code></pre>
<h2 id="csså·¥ä½œæµç¨‹">CSSå·¥ä½œæµç¨‹</h2>
<h3 id="é¡µé¢æ¸²æŸ“æœºåˆ¶">é¡µé¢æ¸²æŸ“æœºåˆ¶</h3>
<p>é¡µé¢æ¸²æŸ“ä¸»è¦ä»¥ä¸‹5ä¸ªæ­¥éª¤ï¼š</p>
<ol>
<li>å¤„ç†HTMLæ¥åˆ›å»ºDOM treeï¼›</li>
<li>å¤„ç†CSSæ¥åˆ›å»ºCSSOM treeï¼›</li>
<li>æ ¹æ®DOMè·ŸCSSOMæ¥åˆå¹¶render treeï¼›</li>
<li>æ ¹æ®render treeæ¥å¸ƒå±€ï¼›</li>
<li>ç»˜åˆ¶render treeã€‚</li>
</ol>
<h3 id="cssçš„å·¥ä½œæµç¨‹">CSSçš„å·¥ä½œæµç¨‹</h3>
<p><img src="https://hakuless.github.io//post-images/1557976033477.png" alt="">
<strong>é‡æ’</strong> ä¸ <strong>é‡ç»˜</strong></p>
<h2 id="cssé€»è¾‘å±æ€§">CSSé€»è¾‘å±æ€§</h2>
<h3 id="æ–°æ—§é€»è¾‘å±æ€§å¯¹æ¯”">æ–°æ—§é€»è¾‘å±æ€§å¯¹æ¯”</h3>
<p><img src="https://hakuless.github.io//post-images/1557976478759.png" alt="">
æ–°æ—§é€»è¾‘å¯¹æ¯”å›¾è¡¨å¦‚ä¸‹ï¼š</p>
<table>
<thead>
<tr>
<th>æ—§çš„é€»è¾‘å±æ€§</th>
<th>æ–°çš„é€»è¾‘å±æ€§</th>
</tr>
</thead>
<tbody>
<tr>
<td>margin-top</td>
<td>margin-block-start</td>
</tr>
<tr>
<td>margin-right</td>
<td>margin-inline-end</td>
</tr>
<tr>
<td>margin-bottom</td>
<td>margin-block-end</td>
</tr>
<tr>
<td>margin-left</td>
<td>margin-inline-start</td>
</tr>
<tr>
<td>border-top</td>
<td>border-block-start</td>
</tr>
<tr>
<td>border-right</td>
<td>border-inline-end</td>
</tr>
<tr>
<td>border-bottom</td>
<td>border-block-end</td>
</tr>
<tr>
<td>border-left</td>
<td>border-inline-start</td>
</tr>
<tr>
<td>padding-top</td>
<td>padding-block-start</td>
</tr>
<tr>
<td>padding-right</td>
<td>padding-inline-end</td>
</tr>
<tr>
<td>padding-bottom</td>
<td>padding-block-end</td>
</tr>
<tr>
<td>padding-left</td>
<td>padding-inline-start</td>
</tr>
<tr>
<td>width</td>
<td>inline-size</td>
</tr>
<tr>
<td>height</td>
<td>block-size</td>
</tr>
</tbody>
</table>
<p>Yè½´æ–¹å‘å±æ€§ä½¿ç”¨ <strong>block</strong>ï¼ŒXè½´æ–¹å‘å±æ€§ä½¿ç”¨ <strong>inline</strong></p>
<h3 id="csså®šä½">CSSå®šä½</h3>
<table>
<thead>
<tr>
<th>æ—§çš„é€»è¾‘å±æ€§</th>
<th>æ–°çš„é€»è¾‘å±æ€§</th>
</tr>
</thead>
<tbody>
<tr>
<td>top</td>
<td>inset-block-start</td>
</tr>
<tr>
<td>bottom</td>
<td>inset-block-end</td>
</tr>
<tr>
<td>left</td>
<td>inset-inline-start</td>
</tr>
<tr>
<td>right</td>
<td>inset-inline-end</td>
</tr>
</tbody>
</table>
<pre><code>/* æ—§çš„é€»è¾‘å±æ€§ */
.popup{
  position:fixed;  
  top:0;
  bottom:0;
  left:0;
  right:0;
}
/* æ–°çš„é€»è¾‘å±æ€§ */
.popup{
   position:fixed;
   inset-block-start:0;  /*top - in English*/
   inset-block-end:0;    /*bottom - in English*/
   inset-inline-start:0; /*left - in English*/
   inset-inline-end:0;   /*right - in English*/
}
/* æ–°çš„é€»è¾‘å±æ€§æ”¯æŒç®€å†™ */
.popup{
   position:fixed;
   inset:0 0 0 0;   /*top, right, bottom, left - in English*/
}
</code></pre>
<p><img src="https://hakuless.github.io//post-images/1557977057594.png" alt="">
<img src="https://hakuless.github.io//post-images/1557977069217.png" alt=""></p>
<h2 id="cssç›’å­æ¨¡å‹">CSSç›’å­æ¨¡å‹</h2>
<p>å¾…è¡¥å……</p>
<h2 id="cssé€‰æ‹©å™¨">CSSé€‰æ‹©å™¨</h2>
<h3 id="åŸºæœ¬é€‰æ‹©å™¨">åŸºæœ¬é€‰æ‹©å™¨</h3>
<ol>
<li>ç±»å‹é€‰æ‹©å™¨ï¼š ç›´æ¥htmlæ ‡ç­¾ï¼Œå¦‚ html {width: 100%;}</li>
<li>ç±»é€‰æ‹©å™¨ï¼šhtmlæ ‡ç­¾ä¸­classå±æ€§çš„å€¼ï¼Œå¦‚ .div {width: 100%;}</li>
<li>IDé€‰æ‹©å™¨ï¼šç°åœ¨ä¸å’‹ç”¨äº†ï¼Œé€šè¿‡htmlæ ‡ç­¾çš„IDå±æ€§æ¥é€‰æ‹©</li>
<li>é€šç”¨é€‰æ‹©å™¨ï¼šæ›´ä¸ä¼šç”¨... æ‰€æœ‰æ ‡ç­¾ç”Ÿæ•ˆ...</li>
<li>å±æ€§é€‰æ‹©å™¨ï¼šæ ¹æ®htmlæ ‡ç­¾é‡Œçš„å±æ€§é€‰æ‹©ï¼Ÿï¼Ÿï¼Ÿ</li>
</ol>
<h3 id="ç»„åˆé€‰æ‹©å™¨">ç»„åˆé€‰æ‹©å™¨</h3>
<ol>
<li>ç©ºæ ¼ï¼šåä»£é€‰æ‹©å™¨ï¼Œ<strong>.a .b</strong> æ‰€æœ‰åä»£éƒ½ç”Ÿæ•ˆ</li>
<li>
<blockquote>
<p>ï¼šå­ä»£é€‰æ‹©å™¨ï¼Œ<strong>.a &gt; .b</strong> åªåœ¨ä¸€çº§å„¿å­ç”Ÿæ•ˆ</p>
</blockquote>
</li>
<li>~ï¼šåç»§é€‰æ‹©å™¨ï¼Œ<strong>.a ~ .b</strong> å¼Ÿå¼Ÿé€‰æ‹©å™¨ï¼Œå“¥å“¥ä¸ç”Ÿæ•ˆ</li>
<li>+ï¼šç›´æ¥åç»§é€‰æ‹©å™¨ï¼Œ<strong>.a + .b</strong> èƒ½ç”Ÿæ•ˆçš„ç¬¬ä¸€ä¸ªå¼Ÿå¼Ÿç”Ÿæ•ˆ</li>
<li>|ï¼šå‘½åç©ºé—´é€‰æ‹©å™¨ï¼Œ<strong>.a | .b</strong> ä¸åä»£ç±»ä¼¼</li>
<li>||ï¼šåˆ—è¡¨é€‰æ‹©å™¨ï¼Œç›´æ¥æ— è§†ï¼Œè¿™è¾ˆå­éƒ½ä¸ä¼šç”¨çš„</li>
</ol>
<h3 id="ä¼ªç±»-ä¸-ä¼ªå…ƒç´ ">ä¼ªç±» ä¸ ä¼ªå…ƒç´ </h3>
<p><strong>ä¼ªç±»</strong>ï¼šä¼ªç±»æ˜¯æ·»åŠ åˆ°é€‰æ‹©å™¨çš„å…³é”®å­—ï¼ŒæŒ‡å®šè¦é€‰æ‹©çš„å…ƒç´ çš„ç‰¹æ®ŠçŠ¶æ€ï¼Œå¦‚ a:hoverï¼Œé¼ æ ‡æ‚¬åœçŠ¶æ€çš„æ•ˆæœ</p>
<pre><code>// è¯­æ³•
selector:pseudo-class {
  property: value;
}
</code></pre>
<p><strong>ä¼ªå…ƒç´ </strong>ï¼šä¼ªå…ƒç´ æ˜¯ä¸€ä¸ªé™„åŠ è‡³é€‰æ‹©å™¨æœ«çš„å…³é”®è¯ï¼Œå…è®¸ä½ å¯¹è¢«é€‰æ‹©å…ƒç´ çš„ç‰¹å®šéƒ¨åˆ†ä¿®æ”¹æ ·å¼ã€‚ä¸€ä¸ªé€‰æ‹©å™¨ä¸­åªèƒ½ä½¿ç”¨ä¸€ä¸ªä¼ªå…ƒç´ ï¼Œå¦‚ a::after { content: &quot;â†’&quot;; } åœ¨æ‰€æœ‰aç±»å‹åå¢åŠ ä¸€ä¸ªç®­å¤´å…ƒç´ </p>
<pre><code>// è¯­æ³•
selector::pseudo-element {
  property: value;
}
</code></pre>
<h3 id="csså‡½æ•°">CSSå‡½æ•°</h3>
<ul>
<li>å±æ€§å‡½æ•°ï¼šattr()ï¼›</li>
<li>èƒŒæ™¯å›¾ç‰‡å‡½æ•°ï¼šlinear-gradient()ã€radial-gradient()ã€conic-gradient()ã€repeating-linear-gradient()ã€repeating-radial-gradient()ã€repeating-conic-gradient()ã€image-set()ã€image()ã€url()ã€element()ï¼›</li>
<li>é¢œè‰²å‡½æ•°ï¼šrgb()ã€rgba()ã€hsl()ã€hsla()ã€hwb()ã€color-mod()ï¼›</li>
<li>å›¾å½¢å‡½æ•°ï¼šcircle()ã€ellipse()ã€inset()ã€polygon()ã€path()</li>
<li>æ»¤é•œå‡½æ•°ï¼šblur()ã€brightness()ã€contrast()ã€drop-shadow()ã€grayscale()ã€hue-rotate()ã€invert()ã€opacity()ã€saturate()ã€sepia()ï¼›</li>
<li>è½¬æ¢å‡½æ•°ï¼šmatrix()ã€matrix3d()ã€perspective()ã€rotate()ã€rotate3d()ã€rotateX()ã€rotateY()ã€rotateZ()ã€scale()ã€scale3d()ã€scaleX()ã€scaleY()ã€scaleZ()ã€skew()ã€skewX()ã€skewY()ã€translate()ã€translateX()ã€translateY()ã€translateZ()ã€translate3d()ï¼›</li>
<li>æ•°å­¦å‡½æ•°ï¼šcalc()ã€min()ã€max()ã€mixmax()ã€repeat()ï¼›</li>
<li>ç¼“åŠ¨å‡½æ•°ï¼šcubic-bezier()ã€steps()ï¼›</li>
<li>å…¶ä»–å‡½æ•°ï¼šcounter()ã€counters()ã€toggle()ã€var()ã€ symbols()ã€‚
<a href="https://www.w3cplus.com/css/css-functions.html">CSSå‡½æ•°è¯´æ˜</a></li>
</ul>
<h2 id="å‚è€ƒèµ„æ–™">å‚è€ƒèµ„æ–™</h2>
<p><a href="https://krissarea.gitee.io/blog/">é±¼å¤´çš„æµ·ä¸Šä¸–ç•Œ</a>
<a href="https://www.w3.org/TR/?tag=css">CSS W3Cæ ‡å‡†æ–‡æ¡£</a>
<a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS">CSS MDNæ–‡æ¡£</a></p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[JSè¯­æ³•å­¦ä¹ ]]></title>
        <id>https://hakuless.github.io//post/js-yu-fa-xue-xi</id>
        <link href="https://hakuless.github.io//post/js-yu-fa-xue-xi">
        </link>
        <updated>2019-05-09T03:41:59.000Z</updated>
        <content type="html"><![CDATA[<h2 id="generators">Generators</h2>
<h2 id="promise">Promise</h2>
<h2 id="asyncawait">Async/Await</h2>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Stack & DFS]]></title>
        <id>https://hakuless.github.io//post/stack-and-dfs</id>
        <link href="https://hakuless.github.io//post/stack-and-dfs">
        </link>
        <updated>2019-02-19T12:00:22.000Z</updated>
        <summary type="html"><![CDATA[<h3 id="stack-dfs">Stack &amp; DFS</h3>
<p>Similar to BFS, <strong>Depth-First Search</strong> can also be used to find the path from the root node to the target node.</p>
<p>The first path you found in DFS is not always the shortest path.</p>
]]></summary>
        <content type="html"><![CDATA[<h3 id="stack-dfs">Stack &amp; DFS</h3>
<p>Similar to BFS, <strong>Depth-First Search</strong> can also be used to find the path from the root node to the target node.</p>
<p>The first path you found in DFS is not always the shortest path.</p>
<!-- more -->
<h3 id="dfs-template-i">DFS - Template I</h3>
<h4 id="template-recursion">Template - Recursion</h4>
<pre><code>/*
 * Return true if there is a path from cur to target.
 */
boolean DFS(Node cur, Node target, Set&lt;Node&gt; visited) {
    return true if cur is target;
    for (next : each neighbor of cur) {
        if (next is not in visited) {
            add next to visted;
            return true if DFS(next, target, visited) == true;
        }
    }
    return false;
}
</code></pre>
<h3 id="dfs-template-ii">DFS - Template II</h3>
<p>The advantage of the recursion solution is that it is easier to implement. However, there is a huge disadvantage: if the depth of recursion is too high, youwill suffer from <strong>stack overflow</strong>.  In that case, you might want to use BFS instead or implement DFS using an explicit stack.</p>
<pre><code>/*
 * Return true if there is a path from cur to target.
 */
boolean DFS(int root, int target) {
    Set&lt;Node&gt; visited;
    Stack&lt;Node&gt; stack;
    add root to stack;
    while (s is not empty) {
        Node cur = the top element in stack;
        remove the cur from the stack;
        return true if cur is target;
        for (Node next : the neighbors of cur) {
            if (next is not in visited) {
                add next to visited;
                add next to stack;
            }
        }
    }
    return false;
}
</code></pre>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[ArrayList.sortè¸©å‘ä¹‹æ—…]]></title>
        <id>https://hakuless.github.io//post/arraylistsort-cai-keng-zhi-lu</id>
        <link href="https://hakuless.github.io//post/arraylistsort-cai-keng-zhi-lu">
        </link>
        <updated>2018-04-09T13:18:21.000Z</updated>
        <content type="html"><![CDATA[<h2 id="èƒŒæ™¯">èƒŒæ™¯</h2>
<p>ç›¸ä¿¡å¤§å®¶ç»å¸¸ä¼šç”¨åˆ°å„ç§ä¼˜æƒ åˆ¸ï¼Œå¦‚å¤–å–ã€æ‰“è½¦ç­‰åœºæ™¯ï¼Œè€Œå…¶ä¸­ä¼˜æƒ åˆ¸çš„æ’åºï¼Œéœ€è¦æŒ‰ç…§å¤šä¸ªç»´åº¦æ¥æ’åºï¼Œæ¯”å¦‚ï¼š</p>
<ol>
<li>é¦–å…ˆæŒ‰ç…§ä»·æ ¼æ˜¯å¦æ»¡è¶³å¯ç”¨ï¼Œæ‰€æœ‰å¯ç”¨çš„åœ¨æœ€å‰é¢ï¼Œä¸å¯ç”¨çš„åœ¨æœ€åé¢</li>
<li>å¯¹äºå¯ç”¨çš„ä¼˜æƒ åˆ¸ï¼Œéœ€è¦æŒ‰ç…§åˆ¸æœ¬èº«çš„ä»·æ ¼æ’åºï¼Œè¶Šå€¼é’±çš„æ’åºè¶Šåœ¨å‰é¢</li>
<li>å¯¹äºä»·æ ¼ç›¸åŒçš„ï¼Œéœ€è¦æŒ‰ç…§è¿‡æœŸæ—¶é—´æ’åºï¼Œå¿«è¿‡æœŸæ’åœ¨å‰é¢</li>
<li>å‰©ä½™é¡ºåºä»»æ„ï¼Œå³å¯ä»¥è®¤ä¸ºå‰©ä½™å…¶ä»–å±æ€§ä¸å½±å“æ’åº</li>
</ol>
<p>æ ¹æ®ä¸Šè¿°æ¡ä»¶ï¼Œå¯¹ä¸€ä¸ªArrayListè¿›è¡Œæ’åºï¼Œé€šè¿‡ä¼ å…¥ä¸€ä¸ªComparatoræ¥å®ç°ï¼Œæƒ³å½“ç„¶çš„æ•²å…¥äº†ä¸‹é¢çš„ä»£ç ... æŒ‰ç…§ä»·æ ¼æ˜¯å¦æ»¡è¶³å¯é€‰ç­‰ä¸Šè¿°æ¡ä»¶åˆ†åˆ«è¿”å› -1 å’Œ 1ã€‚çœŸæ­£æŒ‰ç…§Comparatoræ¥å£å«ä¹‰ï¼Œè¿”å›intå€¼å«ä¹‰åˆ†ä¸º3ç§ï¼Œè´Ÿæ•°ã€0ã€æ­£æ•°ï¼Œåˆ†åˆ«ä»£è¡¨ç¬¬ä¸€ä¸ªå‚æ•°å°äºã€ç­‰äºã€å¤§äºç¬¬äºŒä¸ªå‚æ•°ã€‚</p>
<pre><code class="language-Java">Collections.sort(mCouponInfoList, new Comparator&lt;UserCouponInfo&gt;() {
    @Override
    public int compare(UserCouponInfo o1, UserCouponInfo o2) {
        boolean canSelect1 = o1.priceLimit &lt;= mTotalPrice;
        boolean canSelect2 = o2.priceLimit &lt;= mTotalPrice;

        // sort by three dimensions, can be selected, value &amp; end time
        if (canSelect1 &amp;&amp; !canSelect2) {
            return -1;
        } else if (canSelect2 &amp;&amp; !canSelect1) {
            return 1;
        } else if (o1.value &gt; o2.value) {
            return -1;
        } else if (o1.value &lt; o2.value) {
            return 1;
        } else if (o1.endTime &lt; o2.endTime) {
            return -1;
        } else {
            // å‘ç”Ÿé”™è¯¯çš„ä½ç½® âŒ
            return 1; 
        }
    }
});
</code></pre>
<p>ç›´è§‰ä¸Šï¼Œå¯¹äºä¸å…³æ³¨çš„å±æ€§æ’åºé¡ºåºæ— æ‰€è°“ï¼Œå°±åœ¨æœ€åçš„ else å…¨éƒ¨ç»™äº† return 1ï¼Œå¯¹äºä¸€äº›æ•°æ®ä¼šçˆ†å‡ºcrashï¼šjava.lang.IllegalArgumentException: Comparison method violates its general contract!</p>
<h2 id="è§£å†³">è§£å†³</h2>
<p>æŸ¥è¯¢å®šä½é—®é¢˜äº§ç”ŸåŸå›  &amp; è§£å†³é—®é¢˜æ¯”è¾ƒå®¹æ˜“ï¼Œç›´æ¥æŸ¥Googleä¹Ÿèƒ½å‘ç°è¿™ä¸ªCrash Logçš„å«ä¹‰æ˜¯Compareè‡ªå·±è¿åäº†è‡ªå·±çš„çº¦å®šï¼Œå³æ’åºè‡ªèº«å‡ºç°äº†å†²çªï¼Œäº§ç”Ÿäº†å¦‚ C &gt; A &gt; B &gt; C è¿™æ ·çš„ç»“æœï¼Œæ˜¾ç„¶è¿™ç§æ˜¯æ˜æ˜¾çš„å¼‚å¸¸ã€‚
ä¿®å¤æ–¹æ¡ˆä¹Ÿååˆ†çš„ç®€å•ï¼Œåªè¦å¯¹äºä¸å…³å¿ƒçš„å±æ€§return 0å³å¯ï¼Œå³è®¤ä¸ºå€¼ç›¸ç­‰ï¼Œå¯¹äºä¸Šè¿°æ ¸å¿ƒå†…å®¹ä¿®æ”¹å¦‚ä¸‹ï¼š</p>
<pre><code class="language-Java">// sort by three dimensions, can be selected, value &amp; end time
if (canSelect1 &amp;&amp; !canSelect2) {
    return -1;
} else if (canSelect2 &amp;&amp; !canSelect1) {
    return 1;
} else if (o1.value &gt; o2.value) {
    return -1;
} else if (o1.value &lt; o2.value) {
    return 1;
} else if (o1.endTime &lt; o2.endTime) {
    return -1;
} else if (o1.endTime &gt; o2.endTime) {
    return 1;
} else {
    return 0;
}
</code></pre>
<p>è¿™æ ·å¯¹äºç›¸ç­‰çš„å…ƒç´ ï¼Œä¸ä¼šå†æœ‰æ¨¡æ£±ä¸¤å¯é—®é¢˜ï¼Œè‹¥æ˜¯ç±»ä¼¼äºä¸Šè¿°æ•°æ®æºï¼Œåˆ™ä¼šå¾—å‡ºæ•°æ® C = A = B = Cï¼Œä¸ä¼šå‘ç”Ÿé”™è¯¯ã€‚</p>
<h2 id="åŸå› ">åŸå› </h2>
<p>ä¸‹é¢é‡å¤´æˆæ¥äº†ï¼Œè®©æˆ‘ä»¬ä¸€èµ·åœ¨æºç çš„æµ·æ´‹é‡Œé¢æ¢ç©¶ä¸‹åˆ°åº•æ˜¯ä»€ä¹ˆæ ·çš„æ‰§è¡Œè¿‡ç¨‹ &amp; æ•°æ®æºå¯¼è‡´çš„è¿™ä¸ªé—®é¢˜ï¼</p>
<blockquote>
<p>é‡åˆ°é—®é¢˜ä¸èƒ½æµ…å°è¾„æ­¢ï¼Œæ·±å…¥æ¢ç©¶ï¼Œæ”¹å˜ä»¥å¾€çš„ä½œé£ï¼</p>
</blockquote>
<p>ä»¥ä¸‹æºç åˆ†æå‡åŸºäºAndroid SDK 26ï¼Œä¸åŒç‰ˆæœ¬å¯èƒ½ä¼šæœ‰äº›ä¸ä¸€æ ·ï¼Œè¯·æ³¨æ„~</p>
<h3 id="æ–¹æ³•è°ƒç”¨æ ˆ">æ–¹æ³•è°ƒç”¨æ ˆ</h3>
<p>å¯¹äºAPI &gt; 25çš„ï¼Œæ–¹æ³•çš„å®é™…è°ƒç”¨æ ˆæ˜¯ Collections.sort -&gt; List.sort -&gt; Arrays.sort -&gt; TimSort.sortï¼Œçœ‹æ ·å­ç½ªæ¶çš„æ ¸å¿ƒå°±åœ¨è¿™ä¸ªTimSortä¸­ã€‚çœ‹æºç ä¹‹å‰ï¼ŒçœŸçš„ä¸æ¸…æ¥šTimSortæ˜¯ä¸ªä»€ä¹ˆsortï¼Œé€šè¿‡æŸ¥çœ‹ç½‘ä¸Šæ–‡ç«  &amp; æºç æ‰çŸ¥é“ï¼ŒTimSortæ˜¯ å½’å¹¶æ’åºï¼ˆmergeSortï¼‰&amp; æ’å…¥æ’åºï¼ˆInsertï¼‰çš„ä¸€ç§æ··åˆä½¿ç”¨ï¼Œå…³äºå…¶è¯¦ç»†å«ä¹‰ä¸åœ¨è¿™é‡Œèµ˜è¿°ã€‚</p>
<pre><code class="language-Java">static&lt;T&gt; void sort(T[] a, int lo, int hi, Comparator&lt;? super T&gt; c, 
                    T[] work, int workBase, int workLen) {
    assert c != null &amp;&amp; a != null &amp;&amp; lo &gt;= 0 &amp;&amp; lo &lt;= hi &amp;&amp; hi &lt;= a.length;

    int nRemaining  = hi - lo;
    if (nRemaining &lt; 2)
        return;  // Arrays of size 0 and 1 are always sorted

    // If array is small, do a &quot;mini-TimSort&quot; with no merges
    if (nRemaining &lt; MIN_MERGE) {
        int initRunLen = countRunAndMakeAscending(a, lo, hi, c);
        binarySort(a, lo, hi, lo + initRunLen, c);
        return;
    }

    /**
     * March over the array once, left to right, finding natural runs,
     * extending short natural runs to minRun elements, and merging runs
     * to maintain stack invariant.
     */
    TimSort&lt;T&gt; ts = new TimSort&lt;&gt;(a, c, work, workBase, workLen);
    int minRun = minRunLength(nRemaining);
    do {
        // Identify next run
        int runLen = countRunAndMakeAscending(a, lo, hi, c);

        // If run is short, extend to min(minRun, nRemaining)
        if (runLen &lt; minRun) {
            int force = nRemaining &lt;= minRun ? nRemaining : minRun;
            binarySort(a, lo, lo + force, lo + runLen, c);
            runLen = force;
        }

        // Push run onto pending-run stack, and maybe merge
        ts.pushRun(lo, runLen);
        ts.mergeCollapse();

        // Advance to find next run
        lo += runLen;
        nRemaining -= runLen;
    } while (nRemaining != 0);

    // Merge all remaining runs to complete sort
    assert lo == hi;
    ts.mergeForceCollapse();
    assert ts.stackSize == 1;
}
</code></pre>
<p>çœ‹ä¸€ä¸‹TimSortçš„sortæ–¹æ³•ï¼Œæ’åºé•¿åº¦å°äº1çš„ç›´æ¥è¿”å›ï¼Œæ— éœ€æ’åºï¼Œå¯¹äºé•¿åº¦å°äºMIN_MERGEï¼ˆå½“å‰ç¯å¢ƒä¸º32ï¼‰ï¼Œå…ˆç”¨countRunAndMakeAscendingé¢„å¤„ç†ï¼Œç„¶åç”¨äºŒåˆ†æŸ¥æ‰¾æ’å…¥æ’åºï¼Œè¿™ä¸ªè¿‡ç¨‹ä¸­ä¸¤ä¸ªæ•°åªä¼šæ¯”è¾ƒä¸€æ¬¡ï¼Œå¹¶ä¸ä¼šå¼•å‘ä¸Šè¿°crashçš„å†…å®¹ï¼Œå› æ­¤ç›®æ ‡åº”è¯¥æ˜¯åœ¨åé¢ï¼Œå¯¹äºå¤§é‡æ•°æ®æ‹†åˆ†ã€‚
å…¶å®é€šè¿‡crash logä¹Ÿèƒ½å®šä½åˆ°ï¼Œè¿™ä¸ªå¼‚å¸¸æ˜¯åœ¨TimSortçš„ mergeLo &amp; mergeHi æ–¹æ³•ä¸­æŠ›å‡ºï¼Œå¦‚ä¸‹å›¾ï¼š	<img src="https://ws3.sinaimg.cn/large/006tKfTcgy1fq5grlrdc1j318u04q759.jpg" alt=""></p>
<h3 id="ç®—æ³•æµç¨‹">ç®—æ³•æµç¨‹</h3>
<h4 id="countrunandmakeascending">countRunAndMakeAscending</h4>
<p>é¦–å…ˆï¼Œé€šè¿‡countRunAndMakeAscendingæ–¹æ³•ï¼Œå°†æ•´ä¸ªæ•°ç»„å˜ä¸ºåˆ’åˆ†ä¸ºå¤šä¸ªå‡åº or é™åºçš„ç‰‡æ®µï¼Œæ¯ä¸ªç‰‡æ®µæ˜¯ä¸€ä¸ªRunï¼Œå¯¹äºé™åºçš„å°†å…¶é€šè¿‡reverseRangeå°†å…¶è½¬æ¢ä¸ºå‡åºï¼Œæ ¸å¿ƒä»£ç å¦‚ä¸‹å›¾ï¼š<img src="https://ws2.sinaimg.cn/large/006tKfTcgy1fq5h2udmcrj319i0au76s.jpg" alt="">
å¦‚ï¼š{1, 3, 2, 10, 5, 4, 1} ä¼šå‘ç”Ÿ3æ¬¡åˆ†ç‰‡
{1, 3}æ­£å¸¸å‡åº {2, 10}æ­£å¸¸å‡åº {1, 4, 5}é™åºè¢«reverseæˆä¸ºå‡åº</p>
<h4 id="mergecollapse-mergeforcecollapse">mergeCollapse &amp; mergeForceCollapse</h4>
<p>å°†Runæ”¾åˆ°ä¸€ä¸ªæ ˆç»“æ„ä¸­ï¼Œå¹¶å¯¹ç›¸é‚»çš„Runè¿›è¡Œmergeæ“ä½œã€‚
å…ˆä¸¾ä¸ªæœ€ç®€å•çš„ä¾‹å­ï¼Œæ•°ç»„123454321çš„æ’åºæµç¨‹å¦‚ä¸‹ï¼Œå…ˆåˆ†Runç‰‡æ®µï¼Œå†mergeã€‚
{1, 2, 3, 4, 5}
{1, 2, 3, 4, 5}, {1, 2, 3, 4}
{1, 1, 2, 2, 3, 3, 4, 4, 5}</p>
<p>é—®é¢˜å°±å‘ç”Ÿåœ¨è¿™ä¸ªmergeçš„è¿‡ç¨‹ä¸­ï¼Œé¦–å…ˆè¿™ä¸ªmergeè¿‡ç¨‹å¹¶ä¸æ˜¯å…¥ä¸ªæ ˆå°±mergeçš„ï¼Œå®ƒæœ‰ä¸ªæ¡ä»¶å¦‚ä¸‹å›¾ï¼š
<img src="https://ws2.sinaimg.cn/large/006tKfTcgy1fq5ifn2e30j313a0fw0v0.jpg" alt=""></p>
<ol>
<li>åªå¯¹ç›¸é‚»çš„åŒºå—merge</li>
<li>è‹¥å½“å‰åŒºå—æ•° &gt;= 3ï¼ŒIf X &lt;= Y + Zï¼Œè‹¥ X &gt;= Z, åˆ™å°† Y å’Œ Z mergeï¼Œå¦åˆ™ åˆå¹¶ X å’Œ Y</li>
<li>è‹¥å½“å‰åŒºå—æ•°ä»…ä¸º 2ï¼ŒIf X&lt;= Yï¼Œå°† X å’Œ Y merge</li>
<li>ä¸æ»¡è¶³åˆ™ç­‰å¾…ä¸‹ä¸€ä¸ªRunå…¥æ ˆï¼Œç›´åˆ°å®Œå…¨æ²¡æœ‰å…¥æ ˆæ•°æ®ï¼Œåˆ™ç”¨mergeForceCollapseå¼ºåˆ¶mergeæ‰€æœ‰Runï¼ˆè¿™é‡Œä»ç„¶æœ‰é€šè¿‡é•¿åº¦ä¸åŒé€‰æ‹©é¡ºåºçš„é€»è¾‘ï¼‰</li>
</ol>
<p>ä¸Šè¿°æµç¨‹å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š
<img src="https://ws4.sinaimg.cn/large/006tNc79gy1fq9ybsclcwj31cg0jo3zl.jpg" alt="">
å‘ç”Ÿé—®é¢˜çš„æ ¸å¿ƒåŸå› å°±æ˜¯åœ¨mergeçš„è¿‡ç¨‹ä¸­ï¼Œç½ªé­ç¥¸é¦–åœ¨æ¯”è¾ƒé¡ºåºçš„ä¸ç»Ÿä¸€ï¼Œå¹¶ä¸ä¸€ç›´æ˜¯indexå°çš„æ¯”è¾ƒindexå¤§çš„ï¼Œåœ¨ mergeHi &amp; mergeLo ä¸­é€šè¿‡è®¡ç®—countçš„èµ¢ç‚¹ï¼Œå³è¦åˆå¹¶çš„æ•°ç»„ä¸­ï¼Œä½ æœ‰å¤šå°‘æ¯”æˆ‘æœ€å°å€¼è¿˜å° or æ¯”æˆ‘æœ€å¤§å€¼è¿˜å¤§çš„ã€‚æå¤´å»å°¾åï¼Œå†æ¬¡æ¯”è¾ƒä¸¤ä¸ªcursorï¼Œä¸¤ä¸ªcursoréƒ½ä»å¤§åˆ°å°å¼€å§‹éå†ï¼Œç„¶åæ¯”è¾ƒå¯»æ‰¾æ’å…¥çš„ä½ç½®ï¼Œç„¶è€Œåœ¨å¯»æ‰¾è¿™ä¸ªæ’å…¥ä½ç½®æ—¶ï¼Œcompare(B[cursor2],A[cursor1])ï¼Œå› æ­¤ä¼šä¸compare(A[cursor1],B[cursor2])çš„ç»“æœä¸ä¸€è‡´ã€‚</p>
<h4 id="bugäº§ç”Ÿè¯¦è§£">bugäº§ç”Ÿè¯¦è§£</h4>
<p>è¯¦ç»†ä¸¾ä¾‹è¯´æ˜ï¼šä¸¤ä¸ªæ•°ç»„Aã€B åˆ†åˆ«æ˜¯{1ï¼Œ3ï¼Œ3ï¼Œ5ï¼Œ7ï¼Œ10} å’Œ {3ï¼Œ8ï¼Œ12ï¼Œ15}ï¼Œé¦–å…ˆè¿›è¡Œæå¤´å»å°¾ï¼Œå¦‚ä¸‹å›¾ï¼š
<img src="https://ws1.sinaimg.cn/large/006tKfTcgy1fq6enhy0r6j3120054mxa.jpg" alt="">
Aä¸­çš„<strong>1</strong>å’ŒBä¸­çš„<strong>15</strong>éƒ½æ˜¯æ— éœ€æ¯”è¾ƒçš„ï¼Œè€Œè¿™é‡Œä¸¤è¾¹3çš„æ¯”è¾ƒæ˜¯æŒ‰ç…§compare(B[0], A[1])æ¯”è¾ƒçš„ï¼Œç”±äºä»£ç çš„é”™è¯¯å¯¼è‡´æ²¡æœ‰æ¯”è¾ƒå‡ºç›¸ç­‰ï¼Œè€Œæ˜¯æ¯”è¾ƒä¸ºå°äºï¼Œå› æ­¤3è¢«ä¿ç•™ã€‚æ­£å¸¸æƒ…å†µåº”è¯¥åº”è¯¥ä¸€ç›´å°†Aä¸­çš„ä¸¤ä¸ª3ä¹Ÿææ‰ï¼Œå¯¹äºç›¸ç­‰çš„å¤„ç†æ˜¯Aä¸­çš„æå¤´ææ‰ï¼ŒBçš„å»å°¾å»æ‰ã€‚ä¸‹é¢æˆ‘ä»¬å°†è¿™ä¸¤ä¸ªé”™è¯¯çš„3æ ‡çº¢è¡¨ç¤ºæ­£å¸¸æƒ…å†µä¸‹ä¸è¯¥ä¿ç•™ã€‚</p>
<blockquote>
<p>æ³¨ï¼šæå¤´å»å°¾è¿‡ç¨‹ä¹Ÿæ˜¯äºŒåˆ†æ³•æ¯”è¾ƒå¯»æ‰¾åˆ°éœ€è¦çš„offset</p>
</blockquote>
<p>è®©æˆ‘ä»¬ç»§ç»­ï¼Œä¸‹é¢å¼€å§‹è¿›è¡Œmergeæ’åºï¼Œä¸¤ä¸ªcursoråˆ†åˆ«æŒ‡å‘Aã€Bçš„å°¾éƒ¨ï¼Œæ¯”è¾ƒåæ’å…¥ã€‚
<img src="https://ws1.sinaimg.cn/large/006tKfTcgy1fq6f4d9z64j30wi0act90.jpg" alt="">
è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬ä¼šè®¤ä¸ºAä¸­æœ€å°çš„å…ƒç´ è¦å¤§äºBä¸­æœ€å°çš„å…ƒç´ ï¼ˆå› ä¸ºæå¤´çš„åŸå› ï¼‰ï¼Œmergeçš„è¿‡ç¨‹ä¸­ä¸æ–­çš„ç§»åŠ¨cursor1å’Œcursor2ç›´åˆ°cursor1åˆ°å¤´ï¼Œç„¶åå°±å¯ä»¥å°†Bä¸­å‰©ä½™çš„å…ƒç´ å…¨éƒ¨ç§»å…¥Açš„å¤´éƒ¨å³å¯å®Œæˆæ’åºã€‚ä½†æ˜¯ï¼Œå½“æ¯”è¾ƒåˆ°ä¸¤è¾¹3çš„è¿‡ç¨‹æ—¶ï¼Œç”±äºæ¯”è¾ƒé¡ºåºçš„å˜åŒ–ï¼Œä¼šæŠŠBä¸­çš„3æ’å…¥åˆ°A[2]ä½ç½®ï¼Œå½“cursor1å†æ¬¡ç§»åŠ¨æ—¶ï¼ŒæŸ¥æ‰¾Bå‘ç°Bå·²ç»ç©ºäº†ï¼Œè¿™ä¸ç¬¦åˆé¢„æƒ³â€œAä¸­æœ€å°çš„å…ƒç´ è¦å¤§äºBä¸­æœ€å°çš„å…ƒç´ â€ï¼Œåº”è¯¥Aå…ˆç©ºï¼ŒBåç©ºæ‰æ­£ç¡®ï¼Œå› æ­¤JDKä¸­ä¸»åŠ¨throwäº†æˆ‘ä»¬é‡åˆ°çš„Exceptionã€‚
<img src="https://ws4.sinaimg.cn/large/006tKfTcgy1fq6fmu2w7zj31060eswfh.jpg" alt="">
ç”±äºcompareçš„é”™è¯¯å†™æ³•ï¼Œå¯¼è‡´Açš„cursoræœªéå†åˆ°å¤´éƒ¨å°±å®Œæˆäº†mergeï¼ŒBä¸­çš„å…ƒç´ å…¨éƒ¨è¢«æ’å…¥åˆ°Aé‡Œäº†ï¼Œè¿™ä¸å¼€å§‹çš„<strong>æå¤´å»å°¾</strong>æœ‰æ˜æ˜¾çš„å†²çªï¼Œæœ€ååº”è¯¥å‰©ä½™1ä¸ªorå¤šä¸ªå…ƒç´ ï¼Œå†ä¸€èµ·copyåˆ°Açš„å¤´éƒ¨æ‰æ˜¯æ­£å¸¸çš„ç»“æœã€‚</p>
<p>ä¸€é¡¿å‡Œä¹±çš„JDKä»£ç ï¼Œæœ€åå› ä¼˜åŒ–å‡å°‘æ¯”è¾ƒæ¬¡æ•°ï¼Œå‘ç”Ÿäº†è¿™ä¸ªé—®é¢˜ï¼Œå…·ä½“ä»£ç å®åœ¨å¤ªä¹±äº†... JDKçš„è¿˜ä¸å¥½è°ƒè¯•... æœ€åè¿˜æ˜¯è¦æ„Ÿè°¢å‰è¾ˆä»¬è¸©çš„å‘ï¼Œä¸ç„¶è¿™ä¸ªé—®é¢˜ç»†èŠ‚çš„ç ”ç©¶è¿˜ä¼šå¤šèŠ±ä¸€äº›æ—¶é—´...</p>
<p>æœ€ç»ˆç»“è®ºï¼Œå¹¶ä¸æ˜¯åªè¦æœ‰ç›¸ç­‰çš„å…ƒç´ å°±ä¼šcrashï¼Œè€Œæ˜¯å¯¹åˆ†Runç‰‡æœ‰ä¸€å®šè¦æ±‚ï¼Œéœ€è¦æ¯”è¾ƒé¡ºåºå‘ç”Ÿä¸ä¸€è‡´çš„åœºæ™¯æ‰æœ‰å¯èƒ½å‘ç”Ÿã€‚
<img src="https://ws4.sinaimg.cn/large/006tKfTcgy1fq5k488ttkj315o040gmh.jpg" alt=""></p>
<h4 id="crashæ•°æ®">Crashæ•°æ®</h4>
<p>æ•°ç»„ï¼š{0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,-2,1,0,-2,0,0,0,0};
æ’åºæ¥å£å®ç°ï¼š</p>
<pre><code class="language-Java">if (o1 &gt; o2) {
    1
} else {
    -1
}
</code></pre>
<h2 id="thanks-to">Thanks to</h2>
<p><a href="http://blog.2baxb.me/archives/993">å›¾è§£JDK7çš„Comparison method violates its general contractå¼‚å¸¸</a>
<a href="https://blog.csdn.net/shadow_zed/article/details/72758912">crashæ•°æ®</a></p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[2017å¹´ç»ˆæ€»ç»“]]></title>
        <id>https://hakuless.github.io//post/2017-nian-zhong-zong-jie</id>
        <link href="https://hakuless.github.io//post/2017-nian-zhong-zong-jie">
        </link>
        <updated>2018-02-13T07:47:58.000Z</updated>
        <summary type="html"><![CDATA[<p>2017ç®—æ˜¯æ¯•ä¸šä¹‹åè¿‡çš„æœ€Happyçš„ä¸€å¹´äº†ï¼Œæ²¡æœ‰åˆ«çš„åŸå› ï¼Œå°±æ˜¯ç»ˆäºæœ‰ç‚¹å°é’±äº†..</p>
]]></summary>
        <content type="html"><![CDATA[<p>2017ç®—æ˜¯æ¯•ä¸šä¹‹åè¿‡çš„æœ€Happyçš„ä¸€å¹´äº†ï¼Œæ²¡æœ‰åˆ«çš„åŸå› ï¼Œå°±æ˜¯ç»ˆäºæœ‰ç‚¹å°é’±äº†..</p>
<!--more-->
<h2 id="ç”Ÿæ´»">ç”Ÿæ´»</h2>
<h3 id="ç©">ç©</h3>
<p>ç”Ÿæ´»è™½ç„¶ä¸æ˜¯ä¸€å›¢ç³Ÿï¼Œä½†ä¸ªäººæ–¹é¢è¿˜æ˜¯æ²¡ä»€ä¹ˆè¿›æ­¥ã€‚å¥èº«ä¹Ÿæ²¡æœ‰åšæŒä½ï¼ŒKeepå°±5æœˆåˆ°10æœˆ... ä¹‹åè™½ç„¶ä¹Ÿæœ‰å’Œ<a href="http://alighters.com/">å¤§ä½¬</a> &amp; é›¨éœè€å¸ˆç­‰äººä¸€èµ·å»æ‰“ç¾½æ¯›çƒï¼Œä½†è¿˜æ˜¯åƒ<strong>è€å®</strong>è¯´çš„ â€œè¿åŠ¨é‡ä¸å¤Ÿå•Šâ€ã€‚æœ¬å¹´åº¦è¿˜æ˜¯è¦åŠ å¼ºè¿åŠ¨ï¼Œå½“ç„¶è¯¥ç©ç©ï¼ˆè¯¥ç©è¿˜æ˜¯è¦ç©çš„ç®€ç§°ï¼‰... åƒä»Šå¹´åœ¨ç¾½æ¯›çƒé£ç››è¡Œä¹‹å‰çš„å°çƒé£ï¼Œè¿˜æœ‰è·Ÿé›¨éœè€å¸ˆã€å¸ˆæ¯ä¸€èµ·æ»‘å†°ï¼Œè¿˜æœ‰ä¿é¾„çƒï¼ˆä¸Šä¸€æ¬¡æ‰“ä¼°è®¡è¦è¿½æº¯åˆ°åœ¨å¤§åº†è·Ÿé«˜ä¸­åŒå­¦ä¸€èµ·æ‰“äº†ï¼‰ï¼Œçœ‹çœ‹ä»Šå¹´èƒ½ä¸èƒ½è·Ÿ<strong>è€å®</strong>ä¸€èµ·å»æ‰“æ‰“ç¯®çƒã€‚</p>
<h3 id="è´­ç‰©">è´­ç‰©</h3>
<p>è´­ç‰©æ–¹é¢ï¼Œæå€¡æç®€ï¼Œå…¨å¹´æ‰”äº†ä¸¤æ‹¨è¡£æœï¼ŒåŸºæœ¬æŠŠä¸ç©¿çš„è¡£æœéƒ½æ‰”äº†ã€‚ä¹°è¡£æœåŸºæœ¬å°±é H&amp;Mã€ä¼˜è¡£åº“äº†ï¼Œä¹°çš„æ€»æ•°é‡ä¸è¦å¤šï¼Œå¯ä»¥ä¹°ç¨å¾®è´µç‚¹çš„ï¼ˆè¿™ä¸¤å®¶æœ€è´µçš„ä¹Ÿå°±å‡ ç™¾... é™¤äº†ç¾½ç»’æœç­‰ ç‰¹ç‚¹çš„ä¸œè¥¿å¯èƒ½1000å¤šç‚¹...ï¼‰ã€‚ç±³å®¶æœ‰å“ä¸Šä¹Ÿä¹°äº›å®¶å±…ç”¨å“ï¼Œå°±æ˜¯è¿™ä¸ªç”µæš–æ°”å‡ºçš„å¤ªæ™šäº†...ä½ è¦å…¥å†¬å‰ or åˆšå…¥å†¬å°±å‡ºæˆ‘è‚¯å®šä¼šä¹°.. è¿™éƒ½2æœˆå¤šäº†ä½ æ‰å‡º... ä»Šå¹´ä¹Ÿç®—ä¸å†·é™äº†ï¼Œä¹°äº†trackpadã€QC35äºŒä»£ï¼ˆç»“åˆHHKB &amp; MBP15 ç®—æ˜¯é›†é½äº†ï¼‰ï¼Œä»¥ä¸ºè‚¡ç¥¨èµšé‚£ä¹ˆå¤šï¼Œè¯¥èŠ±ç‚¹é’±äº«å—ä¸‹ã€‚è¿™åˆšä¹°å®Œå°±...ï¼ˆæé«˜ç”Ÿæ´»è´¨é‡ï¼Œè¿˜æ˜¯ä¸è¦åœ¨ä¹è¿™ç‚¹å°é’±ï¼‰</p>
<p>ä»Šå¹´æ‰“ç®—çœ‹çœ‹OnePlus6 &amp; æ–°çš„iPadï¼Œä¹‹å‰çš„iPad Airç”¨äº†å¤šå¹´ï¼Œä¸€ç›´æ˜¯æˆ‘çœ‹åŠ¨ç”»ã€æ¼«ç”»çš„åˆ©å™¨ï¼Œæ— å¥ˆå½“åˆæ²¡é’±ä¹°çš„16Gçš„ï¼Œç°åœ¨å¾ˆæ˜¯åƒç´§å•Šï¼Œè¦æ˜¯å†ä¹°ä¸€å®šä¹°128çš„ï¼</p>
<h3 id="é£Ÿ">é£Ÿ</h3>
<p>åƒçš„æ–¹é¢ï¼Œä¸å¾—ä¸æä¸€å˜´çš„å°±æ˜¯<strong>çŸ³äºŒé”…</strong>æ’¤å‡ºä¸Šæµ·... æœ‰çš„æœ‹å‹çŸ¥é“ï¼Œæˆ‘æ¥ä¸Šæµ·åƒçš„ç¬¬ä¸€é¡¿é¥­å°±æ˜¯<strong>æ¨å¤§ç¥</strong>è¯·çš„çŸ³äºŒé”…ï¼Œçºªå¿µä»·å€¼ä¸æï¼Œæœ¬èº«æˆ‘ä¹Ÿéå¸¸å–œæ¬¢åƒï¼Œç»å¸¸å‘¨æœ«<strong>ä¸€ä¸ªäºº</strong>ï¼ˆåˆ’é‡ç‚¹ï¼‰å»åƒè¿™ä¸ªå°ç«é”…ï¼Œä¸€ä¸ªäººæ¥ä¸ªè‚‰å…œå…œå¥—é¤ï¼Œæ»¡è¶³ä¸€å¤©.. å·¥ä½œé¤ä¹Ÿåœ¨é˜¶æ®µæ€§çš„å˜åŒ–ï¼Œä¸‰ä¸ªæœˆ70åã€3ä¸ªæœˆä¸Šå®˜é›ªã€3ä¸ªæœˆçš‡å¸å¤§...</p>
<blockquote>
<p>ps:çŸ³äºŒé”…çš„æµ·é²œé…±æ²¹æ˜¯åœ¨ä¸Šæµ·åƒè¿‡æœ€å¥½çš„</p>
</blockquote>
<p>åƒäº†äººç”Ÿä¸­æœ€è´µçš„ä¸€é¡¿æ—¥æ–™ï¼Œæµ¦å‘ä¸ƒå¤•1777åˆ·å¡é‡‘è¯·å®¢çœŸæ˜¯çˆ½ï¼Œè¿™è¿æ°”æœ‰é›¨éœè€å¸ˆçš„ä¸€åŠ~</p>
<h3 id="è¡Œ">è¡Œ</h3>
<p>æ—…æ¸¸çš„è¯ï¼Œç»ˆäºæ—¶éš”Nå¹´ä¹‹åå†æ¬¡æ¥äº†ä¸€å‘ï¼Œç¬¬ä¸€æ¬¡ç¦»å¼€å¤§é™†å»é¦™æ¸¯ã€‚æœç„¶å›½é™…åŒ–æ˜¯å¤§é™†åŸå¸‚æ²¡æ³•æ¯”ï¼ˆè™½ç„¶æ„Ÿè§‰å¯èƒ½ä¸Šæµ·æ›´èˆ’æœï¼‰ï¼Œå¤§é©¬è·¯ä¸Šå¤–å›½äººçš„æ¯”ä¾‹é«˜åˆ°ä»¥ä¸ºè‡ªå·±åœ¨å…¶ä»–å›½å®¶ã€‚è™½ç„¶æ²¡æœ‰ä¹°ä»€ä¹ˆä¸œè¥¿ï¼Œä¸è¿‡è¿˜æ˜¯é€›äº†é€›ï¼Œåƒäº†å¾ˆå¤šå½“åœ°ç¾é£Ÿï¼Œç‚¹è¯„ä¹Ÿåˆ°å…·ä½“å•†å®¶ç­¾ä¸ªåˆ°ï¼ˆç»ˆäºä¸æ˜¯mockçš„äº†ï¼ï¼‰ã€‚é—æ†¾æ²¡æœ‰å•¥ç”¨è‹±è¯­è·Ÿå¤–å›½äººäº¤æµçš„æœºä¼šï¼Œä»Šå¹´è¦åŠ å¼ºæ—¥è¯­å­¦ä¹ ï¼Œäº‰å–ä»Šå¹´å»è¶Ÿæ—¥æœ¬ç©ä¸€ç©~</p>
<h2 id="å·¥ä½œ-å­¦ä¹ ">å·¥ä½œ &amp; å­¦ä¹ </h2>
<p>åœ¨å…¬å¸çš„ä¸šåŠ¡å¼€å‘ç¨³å®šè¿›è¡Œï¼Œä¹Ÿå¢é•¿äº†å¾ˆå¤š <strong>å¼€å‘</strong>&amp;<strong>å¼€å‘ä¹‹å¤–</strong>é¡¹ç›®ç®¡ç†çš„ç»éªŒï¼Œæœªæ¥è¦åšçš„æ›´å¥½ã€‚</p>
<h3 id="å·¥ç¨‹å¸ˆæ€ç»´">å·¥ç¨‹å¸ˆæ€ç»´</h3>
<p>åœ¨<strong>å¤§ä½¬</strong>å’Œ<strong>é˜¿æ—¥</strong>æ¥äº†ä¹‹åï¼Œè¶Šå‘è§‰å¾—è‡ªå·±åœ¨è¿™æ–¹é¢çš„ä¸è¶³ã€‚é‡åˆ°é—®é¢˜ä¹‹åï¼Œè§£å†³é—®é¢˜çš„æ–¹æ¡ˆæ€»æ˜¯æ€è€ƒå“ªä¸ªæ–¹æ¡ˆæ›´å¿«ã€æ›´ç®€å•ï¼Œå¯¹äºå“ªç§æ›´å¥½åˆ™æ€è€ƒçš„è¿‡å°‘ï¼Œé—®é¢˜è§£å†³åä¹Ÿæ²¡æœ‰å¤ç›˜æ€è€ƒæœ‰æ²¡æœ‰æ›´å¥½çš„æ–¹æ¡ˆã€‚åæœŸä¹Ÿæœ‰æ„è¯†çš„å¤šå»æ€è€ƒäº›è¿™æ–¹é¢çš„ä¸œè¥¿ï¼Œæ¯”å¦‚è‡ªå·±çš„<a href="https://github.com/HakuLess/Holo">Holo</a>é¡¹ç›®ä»¥åŠè¿‘æœŸåšçš„é™æ€èµ„æºæ£€æŸ¥ç­‰ã€‚éœ€è¦å¤šè¯»ä¹¦ï¼Œå¤šçœ‹blogï¼Œäº‰å–åšåˆ°ä»¥ä¸‹ï¼š</p>
<ol>
<li>ä¾é æŠ€æœ¯æ‰‹æ®µæ¥è§£å†³é‡åˆ°çš„é—®é¢˜</li>
<li>ä¸æ–­ä¼˜åŒ–è§£å†³æ–¹æ¡ˆ</li>
</ol>
<h3 id="æŠ€æœ¯å­¦ä¹ ">æŠ€æœ¯å­¦ä¹ </h3>
<ul>
<li>Kotlinï¼ŒKotlinå’ŒAnkoLayoutç”¨çš„çœŸæ˜¯çˆ½</li>
<li>Freelineã€Androidæ‰“åŒ…æµç¨‹ã€Gradleè¯­æ³•</li>
<li>rubyã€pythonã€nodeJsä¹Ÿéƒ½å„å†™äº†ç‚¹ä¸œè¥¿ï¼Œæœ€åè¿˜æ˜¯ä¸»ç©pythonå§ï¼Œä¸è¦è´ªå¤šï¼ˆè€Œä¸”Pythonå¯¹Tensorflowçš„æ”¯æŒæœ€å¥½ï¼‰</li>
</ul>
<p>æ­¤å¤–ï¼Œä¹Ÿè¸©äº†ä¸å°‘Androidçš„å‘ï¼Œæ¯”å¦‚<a href="http://hakuless.github.io/2017/05/02/Android%E5%8A%A0%E8%BD%BD%E5%A4%A7%E5%9B%BE%E7%9A%84%E5%BC%82%E5%B8%B8/">AndroidåŠ è½½å¤§å›¾çš„å¼‚å¸¸</a>ï¼Œ<a href="http://hakuless.github.io/2017/06/22/Vivo%E6%89%8B%E6%9C%BA%E4%B8%ADNumberPicker%E8%B8%A9%E5%9D%91%E8%AE%B0/">Vivoæ‰‹æœºä¸­NumberPickerè¸©å‘è®°</a>ï¼Œ<a href="http://hakuless.github.io/2017/12/12/Android-Camera%E8%B8%A9%E5%9D%91%E8%AF%A6%E8%A7%A3/">Android Cameraè¸©å‘è¯¦è§£</a>...  è¿˜æœ‰ä¸ªHashMapé¡ºåºçš„é—®é¢˜.. åœ¨Android 8.0å’Œä¹‹å‰ç‰ˆæœ¬çš„éå†é¡ºåºå˜åŒ–ï¼Œè¿˜è®©æˆ‘è´¡çŒ®äº†ä¸ªçº¿ä¸Šæ•…éšœ...</p>
<p>ä»Šå¹´çš„ç›®æ ‡ä¸»è¦2ç‚¹å§ï¼š</p>
<ol>
<li>ä½œä¸ºAndroidå¼€å‘ï¼ŒAndroidæŠ€æœ¯è‚¯å®šç¬¬ä¸€ä½çš„ã€‚æœŸå¾…èƒ½ç”¨Kotlinå¼€å‘å…¬å¸çš„é¡¹ç›®ï¼</li>
<li>äººå·¥æ™ºèƒ½é£å¾ˆå¤§ï¼Œå­¦ä¹ æœºå™¨å­¦ä¹ ã€TensorFlow</li>
</ol>
<h3 id="ç†è´¢å­¦ä¹ ">ç†è´¢å­¦ä¹ </h3>
<p>ä½œä¸ºä¸€ä¸ªç†è´¢å°ç™½ï¼Œä¹‹å‰åªä¼šæŠŠæ‰€æœ‰çš„é’±éƒ½æ‰”åˆ°ä½™é¢å®é‡Œï¼Œå¹¶ä¸”æ— ä»»ä½•ä¿¡ç”¨å¡ã€‚æ¥äº†ä¹‹åé‡åˆ°å¾ˆå¤šå¡ç¥ï¼Œæ•™æˆäº†éå¸¸å¤šçš„ç†è´¢çŸ¥è¯†ï¼Œæ„Ÿè°¢å„ä½å¤§ä½¬ã€‚2017ä¹°äº†äººç”Ÿä¸­ç¬¬ä¸€æ”¯è‚¡ç¥¨ï¼Œä¹Ÿå­¦ä¹ äº†è®¸å¤šè‚¡ç¥¨ç›¸å…³çŸ¥è¯†ï¼Œå…³æ³¨äº†å‡ ä¸ªè®²ç†è´¢ç›¸å…³çš„å…¬ä¼—å·ã€‚è‡ªå·±ä¹Ÿå‡†å¤‡å†™ç‚¹ä»£ç æ¥åˆ†æåˆ†ææ•°æ®ã€‚è™½ç„¶ç»å†äº†æœ¬è½®çš„ç¾è‚¡å¤§è·Œï¼Œä½†è¿˜æ˜¯æ¶¨äº†å¾ˆå¤šç»éªŒï¼Œâ€œæµ®äºé‚£èƒ½å«äºä¹ˆï¼â€</p>
<ol>
<li>æœ‰äº†æ‹›è¡Œç™½Youngå…¥é—¨ï¼Œç„¶åç›´æ¥å°±ä¸Šæµ¦å‘AEç™½ï¼Œå»ºè¡Œé¾™å¡... è–…ç¾Šæ¯›è¿˜æ˜¯å¾ˆå°‘çš„ï¼ŒçŸ­æœŸä¸å¢åŠ äº†</li>
<li>åŠç†äº†é¦™æ¸¯é“¶è¡Œå¡ï¼Œæ€»èµ„äº§ä¹Ÿæœ‰40%å·¦å³æ˜¯ç¾å…ƒ&amp;æ¸¯å¸ï¼Œç®—æ˜¯åˆæ­¥çš„é…ç½®å§ï¼Œæ¥ä¸‹æ¥ç»§ç»­å­¦ä¹ å§</li>
</ol>
<h2 id="å¨±ä¹ç¯‡">å¨±ä¹ç¯‡</h2>
<p>å•ç‹¬ä¸€ç« æ¥çœ‹çœ‹2017è¢«çœ‹å®Œçš„æ¼«ç”»ã€å°è¯´</p>
<h3 id="å®Œç»“å°è¯´">å®Œç»“å°è¯´</h3>
<ul>
<li>å­ºå­å¸ ï¼ˆé¡¾æ…ä¸ºã€æ…•è¡Œç§‹ï¼Œè¿™å›å†+éŸ©å­ºå­ï¼‰</li>
<li>å¤§æ˜å¦–å­½ï¼ˆç»“å°¾ä¸å¤Ÿè½°è½°çƒˆçƒˆï¼Œä½†æ˜¯æŒºæœ‰å‘³é“ï¼Œç‹ç”Ÿé¬¼å…»èƒ¡æ¡‚æ‰¬ï¼‰</li>
<li>æ‹©å¤©è®°ï¼ˆç»“å°¾ç•¥...ï¼‰</li>
</ul>
<p>æˆ‘çœ‹å°è¯´éƒ½æ˜¯æŒ‰ä½œè€…æ¥çš„ï¼Œç›®å‰åªå¯ç€3ä¸ªä½œè€…çš„çœ‹ çŒ«è…»ã€å†°ä¸´ç¥ä¸‹ &amp; æ··æ²Œç›˜å¤</p>
<ol>
<li>çŒ«è…»çš„ä½œå“éƒ½çœ‹è¿‡ï¼ŒæŒºå¤šäººè®¤ä¸ºã€Šé—´å®¢ã€‹orã€Šåº†ä½™å¹´ã€‹æ˜¯æœ€å¥½çš„ï¼Œä½†æˆ‘ä¸ªäººæœ€å–œæ¬¢ã€Šå°†å¤œã€‹</li>
<li>å†°ä¸´ç¥ä¸‹æ˜¯æœ€è¿‘ä¸¤å¹´ä¸€ç›´åœ¨è¿½çš„ï¼Œé¦–å…ˆå†°å¤§çš„æ›´æ–°å‡ ä¹æ˜¯é£é›¨æ— é˜»ï¼Œæ¯æ—¥2æ›´ã€å‘¨æ—¥1æ›´ï¼Œå…¨å¹´å¾ˆå°‘æœ‰æ–­çš„ï¼ˆè¿™å°±ç¢¾å‹äº†99%çš„ä½œè€…ï¼‰ï¼Œå†™çš„å¯ä¸æ˜¯ä¸‰å°‘é‚£ç§å°ç™½æ–‡ï¼Œ2åˆ†é’Ÿä¸€ç« çš„ï¼Œæ¯ä¸€ç« éƒ½å¯ä»¥ä»”ç»†å“è¯»ï¼Œä¼šå‘ç°å¾ˆå¤šå†…å®¹ã€‚æ¯ä¸ªäººç‰©éƒ½æœ‰è¡€æœ‰è‚‰ï¼Œé¡¾æ…ä¸ºã€æ…•è¡Œç§‹ã€éŸ©å­ºå­ã€èƒ¡æ¡‚æ‰¬</li>
<li>ç›˜å­çš„å¥³å„¿ç³»åˆ—æ¯ä¸ªéƒ½çœ‹è¿‡ï¼Œæœ€å–œæ¬¢çš„å½“å±ã€Šé­”ç‹å¥¶çˆ¸ã€‹ï¼Œæ¢¦æƒ³å¾ˆå¤šæ¬¡èƒ½æŠŠé­”ç‹å¥¶çˆ¸ åŠ¨æ¼«åŒ–è¯¥æœ‰å¤šå¥½ï¼Œä¸çŸ¥é“è¿‡ä¸ª10å¹´20å¹´å•¥çš„èƒ½å¦çœ‹åˆ°å¸Œæœ›~ æœ€è¿‘çš„ç³»åˆ—ã€Šå¾‹æ”¿å¥¶çˆ¸ã€‹æ²¡æœ‰åœ¨è¿½ï¼Œæƒ³ç­‰å¤šå‡ºå‡ºå†çœ‹...ç›˜å­çš„è¿½æ›´è¿˜æ˜¯å¾ˆéš¾å—çš„ï¼Œå°±åƒæŸ¯å—çº¢ä¸é»‘ç³»åˆ—10å¤šé›†æ¯å‘¨è¿½çš„è¯æ„Ÿè§‰è¦ç–¯...</li>
</ol>
<h3 id="å®Œç»“æ¼«ç”»">å®Œç»“æ¼«ç”»</h3>
<ul>
<li>å±±ç”°å’Œä¸ƒä¸ªé­”å¥³ï¼ˆç»“å©šçš„ç‹—ç²® ğŸ˜­ï¼‰</li>
<li>æ¸©ç½—å¤ªéƒï¼ˆè…°æ–©çš„éš¾å—ï¼Œèºæ—‹å·é’©ç”Ÿä¹‹åå°±å–œæ¬¢ä¸Šè¿™ç§ç”»é£äº†ï¼‰</li>
<li>åœ¨åœ°ç‹±è¾¹ç¼˜å‘å–Šï¼ˆè¿·ä¸Šäº†Ellaè¿™ç§åšå¼ºçš„å¥³æ€§ï¼‰</li>
<li>é¥¥è‚ è¾˜è¾˜çš„ç›ä¸½ï¼ˆåˆä¸€ä¸ªè…°æ–©ï¼Œä¸ºå•¥~ è¿™ä¹ˆå¥½çœ‹~ï¼‰</li>
<li>è™«å¥‰è¡Œï¼ˆå¤§ä½œï¼Œå†³æˆ˜æ‰“çš„çœŸä¹…ï¼‰</li>
<li>å¦–ç²¾çš„å°¾å·´ï¼ˆæˆ˜æ–—ä¸å¤Ÿæœ‰ç­–ç•¥ï¼ŒENDçš„æ¢—è¿˜å¯ä»¥ï¼‰</li>
<li>åå™¬äººé—´ï¼ˆæ–­æ–­ç»­ç»­çš„... å‰§æƒ…éƒ½å¿«å¿˜äº†.. è„‘ç”µæ³¢å•Šï¼‰</li>
<li>æ—‹é£ç®¡å®¶ï¼ˆæˆ‘çš„å¤©å•Šï¼Œè¿™ä¸ªç«Ÿç„¶æœ‰ä¸»çº¿ï¼Œè¿˜ä¼šå®Œç»“ï¼ï¼‰</li>
<li>é“é£ï¼ˆæœ€è¿‘å–œæ¬¢æ ¼æ–—æ¼«ç”»äº†ï¼Œæ‹³æ„¿é˜¿ä¿®ç½— å’Œ åˆƒç‰™ç³»åˆ— éƒ½åœ¨è¿½ï¼Œè¿™ä¸ªå¥³æ€§ä¸»è§’çš„ä¹Ÿå¾ˆå¥½çœ‹ï¼‰</li>
<li>è¯šå¦‚ç¥ä¹‹æ‰€è¯´ï¼ˆåˆä¸€ä¸ªæ–­äº†æŒºä¹…çš„ï¼Œå‰§æƒ…æœ‰ç‚¹å¿˜ï¼Œä¸è¿‡å„ç§æ­»äº¡æ¸¸æˆè¿˜æ˜¯å¾ˆå¥½çœ‹ã€å¾ˆçƒ§è„‘ï¼‰</li>
<li>ä¼ªæ‹ï¼ˆå…¶å®æˆ‘æ˜¯å¦¹å¦¹å…šçš„ï¼‰</li>
<li>æ— é—´åŒé¾™ï¼ˆä¹…é—»å¤§åï¼Œä¸€ç›´æ²¡æœ‰çœ‹ï¼Œä¸€æ³¢çœ‹å®Œçš„æ„Ÿè§‰å°±æ˜¯çˆ½ï¼‰</li>
<li>é­‚ç¯ï¼ˆç¥ä½œï¼Œä¸‰ç”Ÿä¸‰ä¸–ç®—ä»€ä¹ˆï¼ä¸ƒç”Ÿä¸ƒä¸–æ‰æ˜¯èµ·ç‚¹ï¼‰</li>
<li>LAST GAMEï¼ˆç‹—ç²®ä¸­ä¸ªäººè®¤ä¸ºèƒ½æ’è¿›å‰3çš„ï¼Œè¿˜æœ‰ä¸€ä¸ªè¦ç•™ç»™æˆ‘ä¼šé•¿å¤§äººï¼‰</li>
<li>é»‘ï¼ˆå°å¥³å­© å’Œ é»‘çŒ«ï¼‰</li>
<li>å››æœˆæ˜¯ä½ çš„è°è¨€ï¼ˆçœ‹å®ŒåŠ¨ç”»æ‰çœ‹çš„æ¼«ç”»ï¼Œä¸¤è€…è´¨é‡éƒ½æ˜¯ç›¸å½“çš„é«˜ï¼Œçœ‹ä¸€æ¬¡å“­ä¸€æ¬¡ï¼‰</li>
<li>è¶…æ™ºæ¸¸æˆï¼ˆè¿™æ™ºå•†ï¼Œæ‰“æ£’çƒèƒ½æŠŠæ•´ä¸ªè”ç›Ÿéƒ½èµ¢èµ°ï¼‰</li>
</ul>
<p>éƒ¨åˆ†çŸ­ç¯‡å°±ä¸è¯´äº†ï¼Œè¿˜æœ‰ä¸€äº›ä¸æ¨èçœ‹çš„... è™½ç„¶æˆ‘çœ‹å®Œäº†...</p>
<ul>
<li>èµ¤èµ«è¡€ç‰©è¯­ï¼ˆè¿™ç»“å±€æˆ‘éƒ½æ— è¯­äº†ï¼Œè¿™æ­£æ´¾åæ´¾åè½¬çš„.. ä½œè€…åˆ°åº•ç»å†äº†å•¥ï¼‰</li>
<li>åˆ»å‘½é­”åƒï¼ˆåŸæœ¬å¥½å¥½åœ°ï¼Œè¿™éƒ½ä¸æ˜¯è…°æ–©ï¼Œæ˜¯ç›´æ¥è¢«æš—æ€äº†ï¼‰</li>
</ul>
<blockquote>
<p>åŠ¨æ¼«æ˜¯æˆ’ä¸äº†äº†ï¼Œè¿™è¾ˆå­éƒ½æˆ’ä¸æ‰äº†ï¼</p>
</blockquote>
<p>ç›®å‰ä»æœ‰å¾ˆå¤šå¥½åŠ¨ç”»æ­£åœ¨è¿½ï¼Œå¦‚ é“¶é­‚ã€é­”æ³•ä½¿çš„æ–°å¨˜ã€é¾™ç‹çš„å·¥ä½œï¼ˆèè‰æ§å¿…çœ‹ï¼‰ï¼ŒåŠ¨æ¼«ä¼°è®¡ä¼šè·Ÿæˆ‘ä¸€è¾ˆå­äº†ï¼
æ¼«ç”»åœ¨è¿½çš„æ›´å¤šï¼Œå…¨å†™ä¸Šçš„è¯åŸºæœ¬ä¸Šæœ¬æ–‡å°±ä¸ç”¨å¹²åˆ«çš„äº†ï¼Œåªæä¸€ä¸ªå§ã€ŠGrandBlueç¢§è“ä¹‹æµ·ã€‹ï¼Œè¿™ä¸ªæç¬‘ç¨‹åº¦å¯ä»¥æ’ç¬¬ä¸€äº†!å¤§åŠå¤œçš„çœ‹ï¼Œçœ‹å¾—æˆ‘ä¹å‡ºäº†å£°ï¼Œæ ¹æœ¬åœä¸ä¸‹æ¥å•Šï¼</p>
<h2 id="æ€»ç»“">æ€»ç»“</h2>
<p>ä»Šå¹´è¦åšçš„äº‹ï¼š</p>
<ol>
<li>å¥èº« &amp; é”»ç‚¼ï¼ˆä¸åƒå¤§ä½¬é‚£æ ·è¦æ±‚ å…«å—è…¹è‚Œï¼Œè‡³å°‘äº‰å–13xå¼€å¤´ï¼Œç°åœ¨154æœ‰ç‚¹èƒ–å•Šï¼‰</li>
<li>è¯»ä¹¦ï¼ˆä¹‹å‰æ€»æ˜¯è‡ªå·±èƒ¡æ€ä¹±æƒ³å¾ˆå¤šï¼Œè¯»ä¹¦å¤ªå°‘ï¼Œåº”è¯¥å¤šè¯»äº›ä¹¦ï¼Œé‡‘èorç®¡ç†æ–¹é¢ï¼‰</li>
<li>å­¦ä¹  Android &amp; TensorFlow</li>
<li>æ¥ç€èµšé’±</li>
</ol>
<p>ä»Šå¤©æ˜¯2018.02.13ï¼Œæ˜å¤©æƒ…äººèŠ‚åé£æœºå›å®¶... åå¤©å°±æ˜¯å¤§å¹´ä¸‰å...
æ–°çš„ä¸€å¹´è¿˜æ˜¯æ²¡æƒ³æ‰¾å¥³æœ‹å‹ï¼ˆä¹Ÿæ²¡æœ‰ä¸æƒ³æ‰¾ï¼ï¼ï¼‰</p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Android Cameraè¸©å‘è¯¦è§£]]></title>
        <id>https://hakuless.github.io//post/android-camera-cai-keng-xiang-jie</id>
        <link href="https://hakuless.github.io//post/android-camera-cai-keng-xiang-jie">
        </link>
        <updated>2017-12-12T13:09:23.000Z</updated>
        <content type="html"><![CDATA[<h2 id="å‰è¨€">å‰è¨€</h2>
<p>é¦–å…ˆï¼Œæœ¬æ–‡ä¸»è¦ä»¥ <strong>android.hardware.Camera</strong> åŒ…æ¥å™è¿°å†…å®¹ï¼Œå…¶å®Googleå®˜æ–¹å·²ç»æŠŠå…¶ä½œä¸ºDeprecatedçš„äº†ï¼Œä½†ç”±äºæ–°çš„åŒ… **android.hardware.camera2 **éœ€è¦æœ€ä½API level 21ï¼Œå³éœ€è¦Android 5.0ä»¥ä¸Šï¼Œä¸”å›½å†…å¾ˆå¤šå‚å•†å¯¹è¿™ä¸ªæ¥å£çš„æ”¯æŒå¹¶ä¸å¥½ï¼Œå› æ­¤æš‚ä¸è€ƒè™‘ï¼ˆä¸»è¦å†…å®¹å…¶å®å˜åŒ–ä¸å¤§ï¼‰
æœ‰å…´è¶£çš„åŒå­¦ï¼Œå¯ä»¥çœ‹ <a href="https://github.com/google/cameraview">https://github.com/google/cameraview</a> ï¼ŒGoogleæä¾›çš„ä¸€ä¸ªCameraViewï¼Œå¯ä»¥è‡ªåŠ¨åˆ¤æ–­ä½¿ç”¨å“ªä¸ªAPI~</p>
<h2 id="å¼€å‘æµç¨‹">å¼€å‘æµç¨‹</h2>
<p><a href="https://developer.android.com/reference/android/hardware/Camera.html">https://developer.android.com/reference/android/hardware/Camera.html</a>
å®˜æ–¹å¼•å¯¼æ–‡æ¡£å¦‚ä¸Šï¼Œå¤§è‡´å¼€å‘æµç¨‹å¯ä»¥æŒ‰ç…§ä¸Šè¿°æ–‡æ¡£æ¥ï¼Œæœ¬æ–‡ä¸»è¦å†…å®¹è®²æ‹ç…§ç›¸å…³ï¼Œæ‘„åƒç›¸å…³æš‚ä¸æ¶‰çŒã€‚</p>
<h3 id="apié€‰æ‹©">APIé€‰æ‹©</h3>
<p><img src="https://ws2.sinaimg.cn/large/006tKfTcgy1fmcn3b6mrjj30k20agmxb.jpg" alt="">
é¦–å…ˆå…ˆè¦è¿›è¡ŒAPIé€‰æ‹©ï¼ŒGoogleå…±æä¾›ä¸¤ç§æ§åˆ¶æ‘„åƒå¤´çš„APIï¼Œæ–°çš„APIæ˜¯Camera2... ä½†æ˜¯ç‚¹è¯„ç¾å›¢çš„minSdkæ˜¯16ï¼Œä¼°è®¡çŸ­æœŸå†…éƒ½æ— æ³•å‡åˆ°21ï¼Œå› æ­¤ä½¿ç”¨Camera1è¿›è¡Œï¼Œå½“ç„¶ä¹Ÿå¯ä»¥ç›´æ¥ä½¿ç”¨googleçš„è¿™ä¸ªCameraViewï¼Œæ ¹æ®SDK VERSIONä½¿ç”¨ä¸åŒçš„APIã€‚</p>
<pre><code class="language-kotlin">if (Build.VERSION.SDK_INT &lt; 21) {            
		mImpl = new Camera1(mCallbacks, preview);        
} else if (Build.VERSION.SDK_INT &lt; 23) {            
		mImpl = new Camera2(mCallbacks, preview, context);        
} else {            
		mImpl = new Camera2Api23(mCallbacks, preview, context);        
}
</code></pre>
<p>æœ¬ç€å«Œéº»çƒ¦çš„åŸåˆ™ï¼Œæ”¾å¼ƒäº†è¯¥æ–¹æ³•ï¼Œä¸»è¦åŸå› æœ‰2ï¼š</p>
<ol>
<li>æµ‹è¯•éœ€è¦æµ‹è¯•3ç§ä¸åŒAndroidç‰ˆæœ¬çš„æ‰‹æœºï¼Œç¡®ä¿æ¯ä¸ªåˆ†æ”¯éƒ½è¦†ç›–åˆ°ï¼Œæ¡ä»¶ä¸å…è®¸</li>
<li>ç‚¹è¯„ã€ç¾å›¢å®¢æˆ·ç«¯å¯¹ç¬¬ä¸‰æ–¹åŒ…çš„å¼•å…¥éƒ½æœ‰é™åˆ¶ï¼Œécom.dianping or com.meituançš„åŒ…éƒ½éœ€è¦ç”³è¯·ï¼ˆsupportåŒ…ä¸­çš„gridviewéƒ½æœ‰é—®é¢˜ï¼Œæ›´ä¸å¿…è¯´è¿™ä¸ªcameraäº†ï¼‰è€Œè‡ªå·±ç²˜çš„è¯ï¼Œä¼šå¼•å…¥ä¸å°‘ä»£ç ï¼Œå› æ­¤æ”¾å¼ƒ</li>
</ol>
<p>ä¸‹é¢çš„è®²è§£å‡æŒ‰ç…§Camera1æ¥è®²è¿°ï¼ŒCamera2ä¼šæœ‰äº›ä¸åŒï¼Œä»…ä¾›å‚è€ƒ</p>
<h2 id="cameraå·¥ä½œæµç¨‹">Cameraå·¥ä½œæµç¨‹</h2>
<h3 id="surfaceview-vs-textureview">SurfaceView vs TextureView</h3>
<p>ä»£ç æ ¸å¿ƒçš„å…ƒç´ æœ‰2ä¸ªï¼Œä¸€ä¸ªæ˜¯Cameraç”¨äºæ§åˆ¶åŠè·å–æ‘„åƒå¤´ä¿¡æ¯ï¼Œå¦ä¸€ä¸ªæ˜¯ç”¨äºå±•ç¤ºé¢„è§ˆæ•ˆæœçš„Viewï¼Œå¯ä»¥ä½¿ç”¨TextureView or SurfaceViewã€‚è¿™ä¸¤ä¸ªViewçš„ç»˜åˆ¶éƒ½æ˜¯åœ¨ç‹¬ç«‹çš„çº¿ç¨‹ä¸­ï¼Œå› æ­¤åœ¨é¢„è§ˆæ‘„åƒå¤´çš„è¿‡ç¨‹ä¸­å¹¶ä¸ä¼šé˜»å¡UIçº¿ç¨‹ï¼Œå¹¶ä¸”SurfaceViewä½¿ç”¨ä¸€ä¸ªç‹¬ç«‹çš„çª—å£ï¼Œæ— æ³•å¯¹å…¶ä½¿ç”¨å¹³ç§»ã€ç¼©æ”¾ç­‰åŠ¨ç”»ï¼Œè€ŒTextureViewå’Œæ™®é€šçš„Viewåœ¨åŒä¸€ä¸ªçª—å£ä¸‹ï¼Œå¯ä»¥ä½¿ç”¨åŠ¨ç”»ã€‚è¯¦ç»†çš„æ¯”è¾ƒå¯ä»¥çœ‹<a href="https://github.com/crosswalk-project/crosswalk-website/wiki/Android-SurfaceView-vs-TextureView">https://github.com/crosswalk-project/crosswalk-website/wiki/Android-SurfaceView-vs-TextureView</a>ï¼Œè¿™é‡Œä»‹ç»äº†å¾ˆå¤šSurfaceViewä¸TextureViewçš„å¯¹æ¯”ã€‚RDå¯ä»¥æ ¹æ®éœ€æ±‚é€‰ç”¨ç›¸åº”çš„Viewé¢„è§ˆæ‘„åƒå¤´çš„å†…å®¹ã€‚ä¸»è¦åˆ†åˆ«ä»¥ä¸‹ï¼š</p>
<ol>
<li>SurfaceViewä¸èƒ½æ‰§è¡ŒViewçš„åŠ¨ç”»ï¼ŒTextureViewå¯ä»¥</li>
<li>å¤šä¸ªSurfaceViewä¸èƒ½å åŠ ï¼ŒTextureViewå¯ä»¥</li>
<li>TextureViewå¿…é¡»åœ¨ç¡¬ä»¶åŠ é€Ÿçš„çª—å£ä¸­</li>
<li>TextureViewæ¶ˆè€—çš„å†…å­˜æ¯”SurfaceViewå¤§</li>
</ol>
<p>ç»¼ä¸Šæ‰€è¿°ï¼Œåœ¨ç¾å›¢8.9æµ·å¤–æ‹ç…§ç¿»è¯‘ä¸­ï¼Œä½¿ç”¨SurfaceViewè¿›è¡Œæ‰¿è½½æ‘„åƒå¤´æ•°æ®ã€‚</p>
<h3 id="cameraåˆå§‹åŒ–">Cameraåˆå§‹åŒ–</h3>
<p>é¦–å…ˆï¼Œåœ¨SurfaceViewçš„SurfaceCreatedå›è°ƒä¸­è¿›è¡Œæ‘„åƒå¤´çš„åˆå§‹åŒ–ï¼Œè®¾ç½®ç›¸å…³å‚æ•°ã€‚</p>
<pre><code class="language-kotlin">// é€‰æ‹©æ‘„åƒå¤´ï¼Œä½¿ç”¨åç½®æ‘„åƒå¤´
int numberOfCameras = Camera.getNumberOfCameras();
for (int i = 0; i &lt; numberOfCameras; i++) {
    Camera.CameraInfo info = new Camera.CameraInfo();
    Camera.getCameraInfo(i, info);
    if (info.facing == Camera.CameraInfo.CAMERA_FACING_BACK) {
        mCameraId = i;
        break;
    }
}

mCamera = Camera.open(mCameraId);
mCamera.setPreviewDisplay(mSurfaceView.getHolder());
mCamera.startPreview();
</code></pre>
<p>æ‘„åƒå¤´å¯ä»¥æœ‰å¤šä¸ªï¼ˆå‰ç½® &amp; åç½®ï¼‰ï¼Œæ ¹æ®éœ€æ±‚é€‰æ‹©ç›¸åº”çš„æ‘„åƒå¤´ï¼Œå¹¶é€šè¿‡open(cameraId)æ–¹æ³•è·å–å¹¶æ‰“å¼€ç›¸åº”æ‘„åƒå¤´ï¼ˆé»˜è®¤ä¸ä¼ å‚æ‰“å¼€åç½®ï¼Œä½†å¾ˆæ€•æœ‰ç‰¹çš„æ‰‹æœº or Romé»˜è®¤å‰ç½®æ‘„åƒå¤´çš„...ï¼‰
å¯¹äºä½¿ç”¨SurfaceViewæ‰¿è½½é¢„è§ˆæ•°æ®çš„ï¼Œé€šè¿‡ä½¿ç”¨setPreviewDisplayæ–¹æ³•ï¼Œè®¾ç½®é¢„è§ˆæ‰€ç”¨çš„å†…å®¹ï¼Œè¿™æ—¶é€šè¿‡startPreviewå°±ä¼šå‘ç°ï¼ŒSurfaceViewçš„éƒ¨åˆ†ä¼šå±•ç¤ºæ‘„åƒå¤´çš„å†…å®¹äº†~</p>
<h3 id="cameraå‚æ•°é…ç½®">Cameraå‚æ•°é…ç½®</h3>
<p>å¦‚æœä½ æ˜¯ç›´æ¥æŒ‰ç…§ä¸Šè¿°ä»£ç å¼€å‘ï¼Œæœ‰å¾ˆå¤§æ¦‚ç‡ä½ ä¼šè¸©åˆ°æ·±å‘~ ä¸»è¦ä»¥ä¸‹Nä¸ªï¼ˆä¸€ä¸ªä¸ªéƒ½æ˜¯æ³ªå•Šï¼‰ï¼š</p>
<ul>
<li>ä½ ä¼šå‘ç°ï¼Œä½ é¢„è§ˆçš„çª—å£æ˜¯æ­ªçš„... å³ä½ æ˜¯ç«–ç€æ‹ï¼Œä½†æ˜¯SurfaceViewä¸­çš„é¢„è§ˆæ˜¯æ¨ªç€çš„...è¿™ä¸ªåŸå› æ˜¯æ‘„åƒå¤´çš„å®‰è£…æ–¹å‘å’Œæ‰‹æœºå‚ç›´æ–¹å‘ä¸ä¸€è‡´ï¼Œè€Œæ˜¯ä½¿ç”¨æ‰‹æœºçš„æ°´å¹³æ–¹å‘... å› æ­¤ï¼Œéœ€è¦è®¾ç½®æ‘„åƒå¤´çš„æ–¹å‘ï¼Œè¿™æ—¶å€™åˆä¼šå¼•å…¥å¦ä¸€ä¸ªé—®é¢˜ï¼Œå°±æ˜¯æ‘„åƒå¤´çš„å®‰è£…æ–¹å‘ä¹Ÿå¯èƒ½ä¸ä¸€æ ·ï¼Œå¤§éƒ¨åˆ†æ‰‹æœºæ˜¯æ—‹è½¬90Â°ï¼Œä½†æœ‰äº›æ‰‹æœºæ˜¯éœ€è¦æ—‹è½¬270Â°... å¦‚å‘çˆ¹çš„Nexus 5X... å› æ­¤è¿™ä¸ªæ—‹è½¬è§’åº¦è¿˜ä¸èƒ½å†™æ­»ï¼Œéœ€è¦é€šè¿‡è·å–CameraInfoè·å–æ–¹å‘çš„ä¸åŒæ¥è®¾ç½®ä¸åŒçš„è§’åº¦~   (â•¬ï¿£çš¿ï¿£)=â—‹</li>
</ul>
<pre><code class="language-kotlin">android.hardware.Camera.CameraInfo info = new android.hardware.Camera.CameraInfo();
android.hardware.Camera.getCameraInfo(cameraId, info);
int rotation = activity.getWindowManager().getDefaultDisplay().getRotation();
int degrees = 0;
switch (rotation) {
    case Surface.ROTATION_0:
        degrees = 0;
        break;
    case Surface.ROTATION_90:
        degrees = 90;
        break;
    case Surface.ROTATION_180:
        degrees = 180;
        break;
    case Surface.ROTATION_270:
        degrees = 270;
        break;
}

int result;
if (info.facing == Camera.CameraInfo.CAMERA_FACING_FRONT) {
    result = (info.orientation + degrees) % 360;
    result = (360 - result) % 360;      // compensate the mirror
} else {
    // back-facing
    result = (info.orientation - degrees + 360) % 360;
}
mCamera.setDisplayOrientation(result);
</code></pre>
<ul>
<li>
<p>é¢„è§ˆã€æ‹ç…§åˆ†è¾¨ç‡å¾ˆä¸æ¸…æ™°é€ æˆè¿™ä¸ªæƒ…å†µçš„ä¸»è¦åŸå› æœ‰äºŒï¼Œä¸€æ˜¯é¢„è§ˆå’Œæ‹ç…§çš„åˆ†è¾¨ç‡éœ€è¦è®¾ç½®ä¸”éœ€è¦å•ç‹¬è®¾ç½®ï¼äºŒæ˜¯é¢„è§ˆå’Œæ‹ç…§æ—¶éœ€è¦è¿›è¡Œå¯¹ç„¦ã€‚é¦–å…ˆé’ˆå¯¹ç¬¬ä¸€ä¸ªé—®é¢˜è¸©çš„å‘è¿›è¡Œè¯´æ˜ï¼Œä¸»è¦éœ€è¦æ³¨æ„ä»¥ä¸‹ä¸¤ç‚¹ï¼š</p>
<ul>
<li>åˆ†è¾¨ç‡å•ç‹¬è®¾ç½®é¢„è§ˆåˆ†è¾¨ç‡ å’Œ æ‹ç…§åˆ†è¾¨ç‡æ˜¯ä¸¤ä¸ªä¸åŒçš„å±æ€§ï¼Œéœ€è¦å•ç‹¬è®¾ç½®ã€‚è€Œä¸”ï¼Œæ¯ä¸ªæ‘„åƒå¤´åªèƒ½è®¾ç½®æˆå…¶æ”¯æŒçš„é¢„è§ˆå’Œæ‹ç…§åˆ†è¾¨ç‡ï¼Œä¸æ˜¯å¯ä»¥éšä¾¿ä»»æ„å¡å€¼çš„ã€‚æ¯”å¦‚ä½ çš„surfaceViewæ˜¯1050x1564è¿™ç§è¯¡å¼‚çš„åˆ†è¾¨ç‡ï¼Œé‚£å°±<strong>åªèƒ½</strong>ï¼ˆæ²¡ç»è¿‡å¤ªå¤šè°ƒç ”ï¼Œå¦‚æœæœ‰å…¶ä»–å¥½æ–¹æ¡ˆï¼Œè°¢è°¢å‘ŠçŸ¥ï¼‰æ‰‹åŠ¨å»æˆªæ–­ or è‡ªåŠ¨æ‹‰ä¼¸ã€‚åŒæ—¶ï¼Œæ‘„åƒå¤´æ”¯æŒçš„ æ‹ç…§åˆ†è¾¨ç‡ å’Œ é¢„è§ˆåˆ†è¾¨ç‡ å¾ˆå¯èƒ½ä¸ç›¸ç¬¦ï¼Œä»£ç å¦‚ä¸‹ï¼š</li>
</ul>
<pre><code class="language-java">// è·å–æ”¯æŒåˆ†è¾¨ç‡
mCamera.getParameters().getSupportedPreviewSizes();
mCamera.getParameters().getSupportedPictureSizes();

/**
 * è·å–æœ€ä½³é¢„è§ˆåˆ†è¾¨ç‡
 *
 * @param sizeList    æ‘„åƒå¤´æ”¯æŒåˆ†è¾¨ç‡åˆ—è¡¨
 * @return é€‚å½“çš„åˆ†è¾¨ç‡ï¼Œå¦‚æœæ²¡æœ‰ç¬¦åˆé€»è¾‘çš„ï¼Œåˆ™é€‰ç”¨æœ€å¤§çš„
 */
public static Camera.Size getFitSize(List&lt;Camera.Size&gt; sizeList) {

    // é¦–å…ˆï¼Œå°†æ‘„åƒå¤´æ”¯æŒçš„åˆ†è¾¨ç‡ é™åºæ’åº
    if (CollectionUtils.isEmpty(sizeList)) {
        return null;
    }
    Collections.sort(sizeList, (lhs, rhs) -&gt; {
        if (lhs.width * lhs.height &lt; rhs.width * rhs.height) {
            return 1;
        } else if (lhs.width * lhs.height &gt; rhs.width * rhs.height) {
            return -1;
        } else {
            return 0;
        }
    });

    // å¯¹äºå¾ˆå¤šæœºå‹ï¼Œç¬¦åˆ4ï¼š3æ‘„åƒå¤´æ¯”è¾ƒå¤šï¼Œè€Œä¸”ä¸é¢„è§ˆçª—å£å¤§å°æ¯”è¾ƒé€‚åˆ
    double surfaceRate = 0.75;

    for (Camera.Size size : sizeList) {
        double previewRate = (double) size.height / (double) size.width;
        if (Math.abs(previewRate - surfaceRate) &lt; RATE_BOUNDS) {
            return size;
        }
    }

    return sizeList.get(0);
}
</code></pre>
<p>è¿™ä¸¤ä¸ªä¸åŒçš„æ–¹æ³•åˆ†åˆ«è·å–æ”¯æŒçš„é¢„è§ˆåˆ†è¾¨ç‡ï¼ˆPreviewï¼‰å’Œæ‹ç…§åˆ†è¾¨ç‡ï¼ˆPictureï¼‰ï¼Œè€Œä¸”è¿™ä¸¤ä¸ªæ•°ç»„å¯èƒ½æ•°æ®ä¸ä¸€è‡´ï¼Œå› æ­¤åœ¨è®¾ç½®æ—¶ä¸èƒ½ä¿è¯è®¾ç½®ç›¸åŒçš„åˆ†è¾¨ç‡ï¼Œåªèƒ½ä½¿ç”¨ç›¸è¿‘çš„å®½é«˜æ¯”ã€‚æ¯”å¦‚åœ¨æœ¬éœ€æ±‚ä¸­ï¼Œé¦–å…ˆå°†åˆ†è¾¨ç‡æ•°ç»„ç”±å¤§åˆ°å°æ’åºï¼Œç„¶åé€‰å–å…¶ä¸­å®½é«˜æ¯”ä¸­ç¬¬ä¸€ä¸ªæ¥è¿‘4ï¼š3çš„ï¼ˆæ¯”å€¼å·®å€¼å°äº0.1ï¼‰ã€‚ç›®å‰æ¥è®²ï¼Œä¸€èˆ¬æ‘„åƒå¤´éƒ½ä¼šæœ‰æ¯”è¾ƒå¤§çš„æ”¯æŒ16ï¼š10ã€16ï¼š9åŠ4ï¼š3ç­‰ä¸»æµæ¯”ä¾‹çš„åˆ†è¾¨ç‡ã€‚è¿™é‡Œé€‰å–çš„æ¯”ä¾‹ä¸»è¦çœ‹ä½ å¼€å‘ä½¿ç”¨çš„SurfaceViewç­‰å®¹å™¨çš„æ¯”ä¾‹ï¼Œå¦åˆ™ä¼šæœ‰æ¯”è¾ƒå¼ºçƒˆçš„æ‹‰ä¼¸æ„Ÿã€‚è‹¥æ˜¯æ²¡æœ‰è®¾ç½®é¢„è§ˆ&amp;æ‹ç…§åˆ†è¾¨ç‡ï¼Œé‚£ç³»ç»Ÿä¼šé€‰å–é»˜è®¤æœ€å°çš„åˆ†è¾¨ç‡ï¼ŒåŸºæœ¬å°±æ²¡æ³•çœ‹äº† â•¥ï¹â•¥...</p>
<ul>
<li>å…¶æ¬¡ï¼Œè¿˜ä¼šæœ‰æ¨¡ç³Šçš„çŠ¶æ€ï¼Œä¸»è¦åŸå› æ˜¯æ‘„åƒå¤´å¯¹ç„¦ä½¿ç”¨çš„é—®é¢˜</li>
</ul>
</li>
</ul>
<pre><code>// è·å–æ”¯æŒåˆ†è¾¨ç‡
mCamera.getParameters().getSupportedFocusModes();
parameters.setFocusMode(Camera.Parameters.FOCUS_MODE_CONTINUOUS_PICTURE);
</code></pre>
<p>ä¸è®¾ç½®åˆ†è¾¨ç‡ç±»ä¼¼ï¼ŒåŒæ ·æ‘„åƒå¤´æ”¯æŒçš„å¯¹ç„¦æ¨¡å¼ä¸å°½ç›¸åŒï¼Œå› æ­¤éœ€è¦è·å–åˆ°Supportçš„æ¨¡å¼ï¼Œç„¶åæ ¹æ®éœ€æ±‚çš„ä¼˜å…ˆçº§è®¾ç½®ç›¸åº”çš„å¯¹ç„¦æ¨¡å¼ã€‚æ–‡æ¡£å¯ä»¥çœ‹<a href="https://developer.android.com/reference/android/hardware/Camera.Parameters.html">https://developer.android.com/reference/android/hardware/Camera.Parameters.html</a>ï¼Œæ‹ç…§å¯ä»¥ä½¿ç”¨FOCUS_MODE_CONTINUOUS_PICTUREï¼Œå½•åƒå¯ä»¥ä½¿ç”¨FOCUS_MODE_CONTINUOUS_VIDEOã€‚</p>
<h3 id="cameraçŠ¶æ€ç®¡ç†">CameraçŠ¶æ€ç®¡ç†</h3>
<p>Cameraå‚æ•°é…ç½®å®Œæˆåï¼Œä¼šæœ‰å„ç§çŠ¶æ€ï¼Œæœ¬æ¬¡å¼€å‘ä¸»è¦æ¶‰åŠåˆ°ä»¥ä¸‹å‡ ç§ï¼š</p>
<ol>
<li>é¢„è§ˆå¼€å¯çŠ¶æ€ mCamera.startPreview();</li>
<li>é¢„è§ˆåœæ­¢çŠ¶æ€ mCamera.stopPreview();</li>
<li>è¿›è¡Œæ‹ç…§ mCamera.takePicture(null, null, mCallback);</li>
<li>é—ªå…‰ç¯çŠ¶æ€ parameters.setFlashMode(Camera.Parameters.FLASH_MODE_OFF/ON);</li>
</ol>
<ul>
<li>
<p>é¦–å…ˆï¼Œå¦‚æœæƒ³è®©SurfaceViewå±•ç¤ºæ‘„åƒå¤´é¢„è§ˆçš„å†…å®¹ï¼Œéœ€è¦è°ƒç”¨startPreviewæ‰èƒ½å¼€å§‹æœ‰æ•°æ®æµè¾“å…¥ï¼Œä¹‹åä¼šæ ¹æ®è®¾ç½®çš„èšç„¦å‚æ•°é€æ¸è‡ªåŠ¨èšç„¦ï¼Œå¯¹äºéœ€è¦ç‚¹å‡»æŒ‰é’®è¿›è¡Œæ‹ç…§çš„ï¼Œå¯ä»¥é€šè¿‡è°ƒç”¨takePictureæ–¹æ³•è·å–å›è°ƒå¤„ç†æ‹ç…§çš„æ•°æ®ã€‚</p>
</li>
<li>
<p>è¿™é‡Œæˆ‘ä»¬ä¼šè¸©åˆ°ç¬¬ä¸€ä¸ªå‘ï¼Œå°±æ˜¯å¯¹stopPreviewçš„å¤„ç†ã€‚éƒ¨åˆ†æ‰‹æœºè°ƒç”¨takePictureæ–¹æ³•åï¼Œä¼šè‡ªåŠ¨åœæ­¢é¢„è§ˆï¼Œä¿ç•™æ‹ç…§å‰çš„æœ€åä¸€å¸§ç”»é¢ï¼Œè€Œéƒ¨åˆ†æ‰‹æœºä¸ä¼šåœæ­¢é¢„è§ˆï¼Œä½ ä¼šå‘ç°å³ä¾¿ç‚¹äº†æ‹ç…§æŒ‰é’®ï¼Œé¢„è§ˆä»ç„¶ç»§ç»­ï¼Œå› æ­¤æ‹ç…§åæ˜¯å¦åœæ­¢é¢„è§ˆéœ€è¦æ‰‹åŠ¨è°ƒç”¨æ‰§è¡ŒstopPreviewï¼Œä¸èƒ½å¤Ÿä¾èµ–ç³»ç»Ÿçš„é»˜è®¤æ•ˆæœï¼ˆè®¸å¤šç¡¬ä»¶ç›¸å…³å¼€å‘éƒ½æ˜¯è¦éµå¾ªè¿™ä¸ªåŸåˆ™å•Š~ï¼‰</p>
</li>
<li>
<p>æ¥ä¸‹æ¥ï¼Œå°±æ˜¯ä¸ç”Ÿå‘½å‘¨æœŸç›¸å…³äº†ï¼Œæ— è®ºä½ çš„ä»£ç æ˜¯åœ¨Activity or Fragmentä¸­ï¼Œå½“å›è°ƒåˆ°onPauseæ—¶ï¼Œéƒ½éœ€è¦æ‰‹åŠ¨é‡Šæ”¾å½“å‰æŒæœ‰çš„æ‘„åƒå¤´ï¼Œå¦åˆ™å…¶ä»–é¡µé¢æ— æ³•æŒæœ‰æ‰‹æœºçš„æ‘„åƒå¤´... è€Œè¿™æ—¶å€™åˆ™ä¼šé‡åˆ°ç¬¬äºŒä¸ªå‘ï¼Œå½“ä½ onResumeæ—¶ï¼Œæ‘„åƒå¤´çš„çŠ¶æ€æ— æ³•ä¿è¯ã€‚å¦‚ä½ å¼€å¯äº†é—ªå…‰ç¯ï¼ŒonStopæ—¶é‡Šæ”¾æ‘„åƒå¤´ï¼ŒonResumeæ—¶é‡æ–°æŒæœ‰ï¼Œè¿™æ—¶å€™é—ªå…‰ç¯æ˜¯å¼€æ˜¯å…³ï¼Ÿç­”æ¡ˆå°±æ˜¯æœ‰äº›æ‰‹æœºæ˜¯å¼€ç€çš„... æœ‰äº›æ‰‹æœºæ˜¯å…³ç€çš„... è€Œä¸”è¿™ä¸ªä½ é€šè¿‡Camera.getParametersæ–¹æ³•è·å–çš„æ‘„åƒå¤´çŠ¶æ€ä¸ä¸€å®šæ˜¯å‡†ç¡®çš„ï¼è¿™ä¸ªä½ æ•¢ä¿¡ï¼å› æ­¤éœ€è¦æˆ‘ä»¬æ‰‹åŠ¨åœ¨onSaveInstanceStateä¸­ä¿ç•™æˆ‘ä»¬æƒ³è¦çš„çŠ¶æ€æ•°æ®ï¼Œå¹¶åœ¨onRestoreInstanceStateé‡æ–°èµ‹å€¼å±æ€§ï¼Œæ‰èƒ½ä¿è¯æˆ‘ä»¬çš„é€»è¾‘æ²¡æœ‰é”™è¯¯ã€‚</p>
</li>
<li>
<p>ç„¶åç‚¹å‡»æ‹ç…§ï¼Œä½ å°±æœ‰å¯èƒ½é‡åˆ°ä¸‹ä¸€ä¸ªå‘... ä¹Ÿè®¸ä½ è¿˜è®°å¾—ä¸Šæ–‡æåˆ°çš„æ‘„åƒå¤´å®‰è£…æ–¹å‘å¯¼è‡´é¢„è§ˆæ–¹å‘ä¸é¢„æœŸä¸ä¸€è‡´çš„é—®é¢˜ï¼Œç„¶åæˆ‘å‘Šè¯‰ä½ ï¼Œæ‹ç…§ä¹Ÿä¼šæœ‰è¿™ä¸ªé—®é¢˜ ï¾(;Â´Ğ”ï½€ï¾) åŒæ ·çš„ï¼Œåœ¨ä½ è·å–æ‹ç…§æ•°æ®åï¼Œéœ€è¦æ‰‹åŠ¨æ—‹è½¬Bitmapï¼Œè¯¦ç»†é€»è¾‘ä¸ä¸Šæ–‡ç±»ä¼¼ï¼Œä¸å†èµ˜è¿°</p>
</li>
</ul>
<h3 id="æƒé™å¤„ç†">æƒé™å¤„ç†</h3>
<p>ä½œä¸ºAndroidå¼€å‘ï¼Œå¤§å®¶éƒ½çŸ¥é“åœ¨Android 6.0ä»¥åéƒ¨åˆ†æƒé™éœ€è¦åŠ¨æ€ç”³è¯·ï¼Œè€Œä¸æ˜¯åƒä¹‹å‰é‚£æ ·å®‰è£…æ—¶å°±ä¼šç›´æ¥è·å–ï¼Œæ‘„åƒå¤´åˆ™åœ¨éœ€è¦ç”³è¯·çš„é‚£ç»„å±é™©æƒé™ä¸­ï¼ˆç¡®å®èƒ½ç†è§£ï¼Œä½ å¯ä»¥æƒ³æƒ³åå°ä¸€ä¸ªæ¨é€ï¼Œæˆ–ä¸€ä¸ªé•¿é“¾å‘é€ä¸ªæ•°æ®ï¼Œä½ çš„æ‘„åƒå¤´è‡ªåŠ¨æ‰“å¼€å¼€å§‹å½•åƒ...ï¼‰</p>
<p>é»˜è®¤æƒ…å†µä¸‹ï¼Œå¦‚æœæ²¡æœ‰ç”³è¯·æƒé™ç›´æ¥è°ƒç”¨Cameraç›¸å…³çš„æ–¹æ³•ï¼Œä¼šç›´æ¥å´©æºƒï¼Œå¦‚è°ƒç”¨startPreviewã€‚è€Œæœ‰äº›ROMè‡ªä»¥ä¸ºäººæ€§åŒ–çš„è‡ªåŠ¨ä¼šå¸®ä½ ç”³è¯·æƒé™ï¼Œé˜²æ­¢Appå´©æºƒï¼Œä½†ä½œä¸ºå¼€å‘äººå‘˜æ— æ³•ä¾èµ–è¿™ç§ROMæä¾›çš„åŠŸèƒ½ï¼Œè¿˜æ˜¯æ¯æ¬¡è¦è‡ªå·±ç”³è¯·ã€‚è€Œæƒé™ä¸»è¦å¯ä»¥åˆ†ä¸º3ç§æˆæƒçŠ¶æ€ï¼Œ<strong>æˆæƒ</strong>ã€<strong>è¯¢é—®</strong>ã€<strong>æ‹’ç»</strong>ã€‚å…¶ä¸­æˆæƒå°±æ˜¯è¯¥Appå¯ä»¥ä»»æ„è°ƒç”¨è¯¥æƒé™ï¼Œè¯¢é—®æ˜¯æ¯æ¬¡è°ƒç”¨å…³é”®æ–¹æ³•éƒ½è¦ç”³è¯·ï¼Œéœ€è¦ç”¨æˆ·æ‰‹ç‚¹åŒæ„æ‰ä¼šç»§ç»­æ‰§è¡Œå›è°ƒã€‚æ‹’ç»åˆ™æ˜¯è¿å¼¹çª—éƒ½ä¸ä¼šå¼¹ï¼Œå› æ­¤éœ€è¦æŠŠéƒ¨åˆ†ä»£ç try catchä½ï¼Œå¹¶åœ¨å…¶exceptionéƒ¨åˆ†å¼¹å‡ºæç¤ºï¼Œè®©ç”¨æˆ·æ‰‹åŠ¨èµ‹äºˆAppç›¸åº”çš„æƒé™ã€‚</p>
<p>è¿™é‡Œå¹¶ä¸æ˜¯æ‘„åƒå¤´å¼€å‘çš„é‡ç‚¹ï¼Œè€Œä¸”å¾ˆå¤šå…¶ä»–éœ€è¦æƒé™çš„ä¸šåŠ¡å¼€å‘ä¹Ÿéƒ½ä¼šæ¶‰åŠåˆ°ï¼Œä¸è¯¦è¿°ï¼Œä½†è¿˜æ˜¯è¯´è¯´è¸©ä½çš„å‘... ä¸»è¦çš„é—®é¢˜å°±åœ¨è¿™ä¸ªç”³è¯·æƒé™éƒ¨åˆ†ï¼Œä¸åŒçš„ROMå¤„ç†ä¸åŒï¼Œè¿™å°±æ˜¯<strong>æ— åº•æ·±æ¸Š</strong></p>
<ol>
<li>æœ‰äº›ROMæƒé™å¼¹çª—ä¸ä¼šé˜»å¡ä¸»çº¿ç¨‹ï¼Œä½ ä¼šå‘ç°ä½ çš„ä»£ç ä»ç„¶ç»§ç»­æ‰§è¡Œå¹¶åœ¨æ— æƒé™çš„æƒ…å†µä¸‹ï¼Œèµ°åˆ°äº†Exceptionä¸­ï¼Œç”¨æˆ·å•¥æ“ä½œéƒ½æ²¡å¹²å‘¢ï¼Œä½†ç³»ç»ŸæŠŠä½ çš„æç¤ºæ–‡æ¡ˆéƒ½å¼¹äº†</li>
<li>æœ‰äº›ROMæƒé™åˆ¤æ–­æœ‰è¯¯...æ˜æ˜æ‰‹æœºä¸Šåº”ç”¨ç¨‹åºæƒé™è®¾ç½®çš„æ˜¯è¯¢é—® or æ‹’ç»ï¼Œä½†ä»£ç ä¸­è·å–åˆ°çš„Grantedå°±æ˜¯trueï¼ŒçœŸæ˜¯ä¸çŸ¥é“å’‹æçš„ è¿˜æ˜¯ä¿¡ä»»try catchå¤šä¸€ç‚¹ï¼Œä¸ç„¶ä¸Šçº¿ä¸€å®šå´©å´©å´© âŠ™ï¹âŠ™|||</li>
</ol>
<h2 id="æ€»ç»“">æ€»ç»“</h2>
<p>è‡³æ­¤ï¼Œæœ¬æ–‡è¯´äº†è®¸å¤šå¼€å‘æ‹ç…§ç›¸å…³åŠŸèƒ½ä¼šè¸©åˆ°çš„å‘ã€‚å…¶å®æœ¬æœŸç¿»è¯‘çš„ä¸šåŠ¡éœ€æ±‚å¼€å‘è¿˜æ¶‰åŠåˆ°å¾ˆå¤šå…¶ä»–å†…å®¹ï¼Œå¦‚jpgæ ¼å¼å›¾ç‰‡å‹ç¼©ã€æ–¹å‘æ„Ÿåº”ã€åŠ¨ç”»ç­‰ï¼Œä½†ä¸æ‹ç…§ç›¸å…³çš„å…±æ€§ä¸æ˜¯å¾ˆå¤šï¼Œä»¥åå…¶ä»–äººå¼€å‘å¾ˆéš¾ä¼šé‡åˆ°ï¼Œä¹Ÿå°±ä¸è¯´äº†...</p>
<p>è¿˜æ˜¯å¤šå¼€å‘è¿™ç§éœ€æ±‚ï¼Œæ‰èƒ½ä½“ä¼šåˆ°æ‰€è°“çš„Androidç¢ç‰‡åŒ–ï¼Œä¸€ä¸ªå±å¹•åˆ†è¾¨ç‡é€‚é…è¿˜æ˜¯æ— æ³•ä½“ç°å‡ºæˆ‘å¤§Androidç¢ç‰‡çš„æ¶å¿ƒç¨‹åº¦çš„ï¼</p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Anko Layout]]></title>
        <id>https://hakuless.github.io//post/anko-layout</id>
        <link href="https://hakuless.github.io//post/anko-layout">
        </link>
        <updated>2017-11-07T13:22:49.000Z</updated>
        <summary type="html"><![CDATA[<p><a href="https://github.com/Kotlin/anko/wiki/Anko-Layouts#why-anko-layouts">githubè¯´æ˜</a>
Kotlinæ”¯æŒçš„ä¸€ç§æ–°çš„ï¼Œä»¥DSLæ–¹å¼å¹¶é€šè¿‡Kotlinä»£ç ç»„ä»¶UIçš„åŠŸèƒ½ã€‚å¯ä»¥è®©RDå®Œå…¨æŠ›å¼ƒä½¿ç”¨xmlå†™layoutï¼ŒèŠ‚çº¦å¼€å‘æ—¶é—´ï¼Œè§„é¿è®¸å¤šæ½œåœ¨bug</p>
]]></summary>
        <content type="html"><![CDATA[<p><a href="https://github.com/Kotlin/anko/wiki/Anko-Layouts#why-anko-layouts">githubè¯´æ˜</a>
Kotlinæ”¯æŒçš„ä¸€ç§æ–°çš„ï¼Œä»¥DSLæ–¹å¼å¹¶é€šè¿‡Kotlinä»£ç ç»„ä»¶UIçš„åŠŸèƒ½ã€‚å¯ä»¥è®©RDå®Œå…¨æŠ›å¼ƒä½¿ç”¨xmlå†™layoutï¼ŒèŠ‚çº¦å¼€å‘æ—¶é—´ï¼Œè§„é¿è®¸å¤šæ½œåœ¨bug</p>
<!--more-->
<h3 id="ä½¿ç”¨demo">ä½¿ç”¨Demo</h3>
<p>åœ¨Activity or Fragmentä¸­çš„onCreateæ–¹æ³•ä¸­ç›´æ¥å†™ä»£ç ï¼š</p>
<pre><code class="language-kotlin">scrollView {
    verticalLayout {

        // é¡¶éƒ¨æ¨¡å—
        val topLayout = linearLayout {
            backgroundColor = resources.getColor(R.color.black)
        }.lparams(width = matchParent, height = dip(30))

        textView(&quot;textview&quot;) {
            textSize = 20f
            gravity = Gravity.CENTER
        }.lparams(width = matchParent, height = dip(300))

        recyclerView {
            val lm = LinearLayoutManager(context)
            lm.orientation = LinearLayoutManager.HORIZONTAL
            layoutManager = lm

            adapter = MegamiAdapter()
        }

        button(&quot;ç‚¹å‡»&quot;) {
            onClick {
                topLayout.setBackgroundColor(resources.getColor(R.color.white))
            }
        }
    }
}

</code></pre>
<p>ä¸€æ­¥ä¸€æ­¥æ¥çœ‹ï¼Œæœ€å¤–å±‚scrollViewè¡¨ç¤ºæ ¹å¸ƒå±€æ˜¯ä¸ªScrollViewï¼Œä¸xmlä¸åŒï¼Œå¯ä»¥çœç•¥width &amp; heightçš„å¡«å†™ï¼Œé»˜è®¤ä¸ºwrap_contentï¼Œæ•´ä½“ç»“æ„ä¸layout.xmlçš„å†™æ³•ç›¸ä¼¼ï¼Œä½¿ç”¨DSLæ–¹å¼è¡¨ç¤ºå„ä¸ªViewçš„ä»å±å…³ç³»ã€‚
æ¯ä¸ªViewçš„å±æ€§èµ‹å€¼å¯ä»¥åœ¨ä¸‰ä¸ªåœ°æ–¹æ“ä½œï¼š</p>
<ul>
<li>layoutParamså¯ä»¥é€šè¿‡æœ€åçš„lparamsæ–¹æ³•è®¾ç½®ï¼ˆå¦‚widthã€heightã€weight &amp; gravityï¼‰xmlä¸­layout_å‰ç¼€çš„å±æ€§ï¼ŒåŒ…æ‹¬marginã€gravityç­‰</li>
<li>Viewçš„æ„é€ å‡½æ•°ï¼Œå¦‚textview å’Œ button æ”¯æŒå•ä¸€Stringå‚æ•°çš„æ„é€ å‡½æ•°ï¼Œä¼šæŠŠè¯¥å‚æ•°settext</li>
<li>Viewçš„åŸŸå†…å¯ä»¥è°ƒç”¨Viewçš„æ‰€æœ‰æ–¹æ³•ï¼Œå¦‚ä¸Šè¿°recyclerViewï¼Œå¯åœ¨å…¶å†…éƒ¨è®¾ç½®adapterã€layoutManagerç­‰</li>
</ul>
<p>é™¤æ­¤ä¹‹å¤–ï¼ŒDSLæ–¹æ³•çš„è¿”å›å€¼å³Viewæœ¬èº«ï¼Œå¯¹äºéœ€è¦æŒæœ‰çš„Viewå¯ä»¥é€šè¿‡å¸¸é‡è·å–å†…å®¹ï¼Œå¦‚ä¸Šè¿°topLayoutèµ‹å€¼ä¸ºé¡¶éƒ¨çš„linearLayoutï¼Œå¯ä»¥åœ¨åº•éƒ¨çš„buttonä¸­çš„ç‚¹å‡»æ–¹æ³•ä¸­æ”¹å˜å…¶èƒŒæ™¯é¢œè‰²</p>
<h3 id="ä¼˜ç‚¹">ä¼˜ç‚¹</h3>
<ul>
<li>ç±»å‹å®‰å…¨ä¸ä¼šå‡ºç°LinearLayoutè½¬RelativeLayoutä¹‹ç±»çš„ä½çº§crashé—®é¢˜</li>
<li>Nullå®‰å…¨ä¸å­˜åœ¨findViewByIdæ‰¾ä¸åˆ°çš„æƒ…å†µï¼Œlayoutæ–‡ä»¶ä¸idä¸åŒ¹é…ï¼Œæ¯”å¦‚è¢«å…¶ä»–aarä¸­çš„layoutè¦†ç›–ç­‰bug</li>
<li>èŠ‚çº¦æ—¶é—´åå°„è§£æXMLè€—è´¹CPUåŠç”µæ± ï¼Œè€Œä¸”åœ¨ä¸€äº›æç«¯æƒ…å†µä¸‹ï¼Œå®¹æ˜“å‘ç”Ÿæ‰¾ä¸åˆ°idçš„errorï¼ˆå¦‚freeline or instantRunï¼‰</li>
<li>ä¸Layoutå…±å­˜ä¸ªäººæ›´å–œæ¬¢çº¯å‡€çš„ã€å…¨éƒ¨éƒ½ä½¿ç”¨Anko Layoutï¼Œä½†å¯¹äºå†å²é¡¹ç›® or ä½¿ç”¨DSLæ–¹å¼å®ç°æœ‰ä¸€å®šéº»çƒ¦çš„ï¼Œå¯ä»¥å…è®¸é€šè¿‡includeå…³é”®å­—åå°„View</li>
</ul>
<pre><code class="language-kotlin">include&lt;View&gt;(R.layout.something) {
    backgroundColor = Color.RED
}.lparams(width = matchParent) { margin = dip(12) }
</code></pre>
<h3 id="ç¼ºç‚¹">ç¼ºç‚¹</h3>
<ul>
<li>RelativeLayoutåŠä¸€äº›å…¶ä»–ä¾èµ–idçš„Layoutä¸Ræ–‡ä»¶ç›´æ¥å¢åŠ çš„ @+idä¸åŒï¼ŒAnko Layoutéœ€è¦è‡ªå·±è®¾ç½®idçš„å€¼ï¼Œå³äººå·¥ä¿è¯idçš„å”¯ä¸€æ€§æ‰€æœ‰éœ€è¦äººæ¥ä¿éšœçš„éƒ½æ˜¯ä¸å¯é çš„...</li>
<li>PreviewåŠŸèƒ½ï¼Œé€šè¿‡xmlå†™Layoutæ—¶å¯ä»¥é€šè¿‡ASçš„PreviewåŠŸèƒ½åœ¨æ— éœ€buildçš„æƒ…å†µä¸‹å°±å¯ä»¥æŸ¥çœ‹å¸ƒå±€çš„æ•ˆæœï¼Œå¹¶å¯ä»¥é€šè¿‡é…åˆtoolsæ¥æŸ¥çœ‹å¡«å†™ä¸åŒå‚æ•°æ—¶çš„æ•ˆæœï¼Œå¦‚æ–‡æ¡ˆä¸€è¡Œã€å¤šè¡Œã€çœç•¥å·ç­‰ç„¶è€Œç›®å‰Anko Layoutçš„Previewä»…æ”¯æŒAndroid Studio 2.4+ï¼ˆ3.0ä¸Šä¸å¥½ä½¿...ï¼‰ç›®å‰Pluginç‰ˆæœ¬å·ä¸ºAnko Support 0.10.2ï¼ŒAndroid Studioç‰ˆæœ¬å·ä¸ºAndroid Studio 3.0 beta7<img src="https://ws2.sinaimg.cn/large/006tKfTcgy1fl8cxm27odj30qq0w0weu.jpg" alt=""></li>
</ul>
<h2 id="åŸç†">åŸç†</h2>
<p>é¦–å…ˆï¼Œé€šè¿‡âŒƒ+âŒ˜+Kå¿«æ·é”®å¯ä»¥è°ƒç”¨Kotlin Byecodeï¼Œå¯¹äºJVMæ¥è®²ï¼ŒKotlinå’ŒJavaæ²¡æœ‰åŒºåˆ«ï¼Œç”šè‡³äºŒè€…å¯ä»¥ä»»æ„çš„äº’ç›¸è½¬æ¢ã€è°ƒç”¨~
ä»¥ä¸€ä¸ªç®€å•çš„Demoï¼Œè®©æˆ‘ä»¬ä¸€èµ·æ¥æ¢ç´¢ä¸‹é€šè¿‡DSLä¹¦å†™å¸ƒå±€çš„ç§˜å¯†ï¼</p>
<h3 id="ä»£ç å‡†å¤‡">ä»£ç å‡†å¤‡</h3>
<pre><code class="language-kotlin">inline fun ViewManager.verticalLayout(theme: Int = 0, init: _LinearLayout.() -&gt; Unit): LinearLayout {
    return ankoView(`$$Anko$Factories$CustomViews`.VERTICAL_LAYOUT_FACTORY, theme, init)
}
</code></pre>
<p>ä¸Šè¿°ä»£ç ï¼ŒverticalLayoutæ–¹æ³•æ”¯æŒ2ä¸ªå‚æ•°ï¼Œå…¶ä¸­ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯é»˜è®¤å€¼ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¸€ä¸ªæ–¹æ³•ï¼ˆé«˜é˜¶å‡½æ•°ä»¥æ–¹æ³•ä½œä¸ºå‚æ•°ï¼‰ï¼Œæ–¹æ³•çš„è¾“å…¥æ˜¯ä¸€ä¸ªè¿”å›å€¼ä¸ºç©ºçš„æ–¹æ³•ï¼ˆç»“åˆLambdaè¡¨è¾¾å¼ï¼‰
<strong>init:Â _LinearLayout.()Â -&gt;Â Unit</strong>
è¿™é‡Œæ˜¯ç›¸å½“äºæ‰§è¡Œ_LinearLayoutä¸­çš„ç©ºæ–¹æ³•ï¼Œä¹‹ååœ¨ **{ } **æ‰€å†™çš„å…·ä½“Viewä»£ç ç›¸å½“äºæ‰§è¡ŒLinearLayoutçš„ç›¸åº”æ–¹æ³•ï¼Œå¯çœ‹ä¸‹æ–‡ä¸€ä¸ªç®€å•ä»£ç ç¤ºä¾‹ï¼š</p>
<pre><code class="language-kotlin">val represents: String.(Int) -&gt; Boolean = { other -&gt; toIntOrNull() == other }
println(&quot;123&quot;.represents(123)) // true
</code></pre>
<h3 id="demoåˆ†æ">DEMOåˆ†æ</h3>
<pre><code class="language-kotlin">class MyActivity : AppCompatActivity() {
    override fun onCreate(savedInstanceState: Bundle?, persistentState: PersistableBundle?) {
        super.onCreate(savedInstanceState, persistentState)
        MyActivityUI().setContentView(this)
    }
}

class MyActivityUI : AnkoComponent&lt;MyActivity&gt; {
    override fun createView(ui: AnkoContext&lt;MyActivity&gt;) = ui.apply {
        verticalLayout {
            val name = editText()
            button(&quot;Say Hello&quot;) {
                onClick { ctx.toast(&quot;Hello, ${name.text}!&quot;) }
            }
        }
    }.view
}
</code></pre>
<p>ä¸Šè¿°å¸ƒå±€å¾ˆç®€å•ï¼Œå°±æ˜¯ä¸€ä¸ªå‚ç›´çš„LinearLayoutä¸­ï¼Œç¬¬ä¸€è¡Œæ˜¯ä¸€ä¸ªEditTextï¼Œç¬¬äºŒè¡Œæ˜¯ä¸€ä¸ªButtonï¼Œå¹¶ä¸”ç‚¹å‡»Btnçš„æ—¶å€™ä¼šå¼¹å‡ºToastï¼Œå…¶ä¸­çš„å†…å®¹æ˜¯ç”¨æˆ·åœ¨editTextä¸­è¾“å…¥çš„æ•°æ®çš„ä¸€ä¸ªæ‹¼è£…
ä½†æ˜¯è¿™ä¸ªLayoutæ˜¯å¦‚ä½•è¿›å…¥contentViewçš„å‘¢ï¼Ÿ
å¦‚æœæ­£å¸¸åªé€šè¿‡Javaä»£ç æ¥å†™è¿™ä¸ªåŠŸèƒ½çš„ä»£ç ï¼Œå°±æ˜¯è‡ªå·±newä¸€å¤§å †Viewï¼Œç„¶åé€šè¿‡addViewä¸€ç‚¹ä¸€ç‚¹çš„ç»„è¿›å»ï¼ŒAnko Layoutæ˜¯å¦‚ä½•æ¨¡ä»¿è¿™ä¸€è¿‡ç¨‹çš„å‘¢ï¼Ÿ</p>
<ul>
<li>é€šè¿‡âŒƒ+âŒ˜+Kå¿«æ·é”®æ‰“å¼€Bytecodeçš„é¢æ¿ï¼ˆä»£ç å¯è¯»æ€§è¿˜æ˜¯æ¯”è¾ƒä½çš„... ç”¨è¡Œå†…çš„è¯å°±æ˜¯ï¼Œè§‚å½±ä½“éªŒæå·®ï¼‰<img src="https://ws3.sinaimg.cn/large/006tKfTcgy1fl8e0r9d8zj31kw0umacd.jpg" alt=""></li>
<li>é€šè¿‡ç‚¹å‡»Bytecodeé¢æ¿ä¸­çš„Decompileå°†å…¶åç¼–è¯‘ä¸ºJava code<img src="https://ws1.sinaimg.cn/large/006tKfTcgy1fl8e4w487gj31kw0t677s.jpg" alt="">å¯¹äºä¸¤ç§DSLä½¿ç”¨æ–¹æ³•ç•¥æœ‰ä¸åŒï¼Œä¸€ç§æ˜¯ç›´æ¥åœ¨onCreateä¸­å†™DSLä»£ç ï¼Œå¦ä¸€ç§æ˜¯é€šè¿‡ä¸€ä¸ªå¤–éƒ¨ç±»ç»§æ‰¿AnkoComponentï¼Œå¹¶å¤å†™å…¶ä¸­çš„createViewæ–¹æ³•ã€‚ä¸¤ç§æ²¡æœ‰æœ¬è´¨ä¸Šçš„åŒºåˆ«ï¼Œæœ¬Demoä»¥ç¬¬äºŒç§æ¥è¿›è¡Œè¯´æ˜ï¼ˆç®—æ˜¯åŒ…æ‹¬äº†ç¬¬ä¸€ç§ï¼Œåªæ˜¯é€šè¿‡AnkoComponentè½¬äº†ä¸€å±‚ï¼ŒåŠ å¼ºLayoutçš„å¤ç”¨åŠŸèƒ½ï¼‰</li>
<li>å…¥å£æ–¹æ³•ä¸º <strong>MyActivityUI().setContentView(this)</strong> å…¶ä¸­setContentViewä¸ºAnkoComponentçš„ä¸€ä¸ªæ‰©å±•ï¼Œåœ¨å†…éƒ¨æ–¹æ³•ä¸­è¿”å›å®ç°çš„AnkoComponentä¸­createViewæ–¹æ³•åˆ›é€ çš„Viewã€‚è€Œ <strong>ui.apply</strong> æ–¹æ³•ä½¿å…¶ä½œç”¨åŸŸå†…éƒ¨ä»»æ„è°ƒç”¨uiçš„æ–¹æ³•ï¼Œå³æˆ‘ä»¬æ‰€å†™çš„DSLé£æ ¼çš„ä»£ç å…¶å®ä¸€æ ·æ˜¯ä¸€ä¸ªä¸€ä¸ªçš„æ–¹æ³•ï¼Œåªæ˜¯çœç•¥æ‰çš„è°ƒç”¨çš„å®ä¾‹ï¼Œä½¿å…¶å¤–è²Œä¸Šçœ‹ä¸Šå»åƒæ˜¯xmlå†™çš„layout~</li>
<li>uiçš„ç±»å‹ä¸º <strong>interface AnkoContext<out T> : ViewManager</strong> kotlinçš„interfaceä¸javaçš„ä¸åŒï¼Œå¯ä»¥æŒæœ‰å˜é‡ å¹¶ä¸” æ–¹æ³•å…è®¸æœ‰é»˜è®¤çš„å®ç°ï¼ˆé è¿‘è™šç±»ï¼‰ï¼Œå…¶ä¸­æ³›å‹çš„in &amp; outä¹Ÿä¸Javaçš„ T extends ä¸ superç±»ä¼¼ï¼Œå®šåˆ¶æ‰€éœ€ç±»å‹çš„ä¸Šç•Œä¸‹ç•Œï¼Œé€šè¿‡inã€outæ–¹å¼æ›´ç›´è§‚çš„é€šè¿‡è¯¥ç±»å‹æ˜¯è¾“å…¥ç±»å‹ or è¾“å‡ºç±»å‹æ¥åˆ¤æ–­ï¼Œæ›´ç¬¦åˆäººçš„ç›´è§‚æ„Ÿå—ğŸ™ƒé€šè¿‡æ‰©å±•ViewManagerçš„æ–¹æ³•ï¼ŒåŠ å…¥äº†verticalLayoutç­‰ä¸€ç³»åˆ—Layoutçš„å®ç°ï¼Œå®ç°äº†æ·»åŠ Viewçš„æ–¹æ³•ï¼</li>
<li>é€šè¿‡ankoViewç”Ÿæˆç›¸åº”çš„Viewï¼Œæ¯”å¦‚verticalLayoutç”ŸæˆLinearLayoutåœ¨CustomViews.ktæ–‡ä»¶ä¸­ï¼Œä»£ç å¦‚ä¸‹</li>
</ul>
<pre><code>inline fun ViewManager.verticalLayout(theme: Int = 0, init: _LinearLayout.() -&gt; Unit): LinearLayout {
    return ankoView(`$$Anko$Factories$CustomViews`.VERTICAL_LAYOUT_FACTORY, theme, init)
}
</code></pre>
<ul>
<li>è€ŒankoViewæ–¹æ³•ä¸­ï¼Œé€šè¿‡ä¼ å…¥çš„factoryæ¥åˆ›å»ºviewï¼ˆfactoryä¸ºä¸€ä¸ªé«˜é˜¶å‡½æ•°ï¼Œæ¥æ”¶contextå‚æ•°è¿”å›ä¸€ä¸ªViewï¼‰ï¼Œå¹¶é€šè¿‡AnkoInternalsæ¥addViewï¼Œè€Œinternalsä¸­çš„addViewå³è°ƒç”¨ViewGroup or AnkoContextä¸­çš„addViewæ–¹æ³•ï¼ˆå…¶å®éƒ½ä¸€æ ·(ï¿£â–½ï¿£)&quot;ï¼‰</li>
<li>æ¥ä¸‹æ¥åˆæ˜¯ä¸€å¤§é•¿ä¸²ï¼Œæˆ‘è¿˜æ˜¯ä»£ç +å›¾ç‰‡æ¥é˜è¿°å§... è¿™ä¸ªç”¨æ–‡å­—è¦æ‰“å¤ªå¤šäº†ï¼Œä¼°è®¡ä½ ä¹Ÿçœ‹ä¸ä¸‹å»ğŸ˜‚AnkoInternals.addView -&gt; createAnkoContext -&gt; AnkoContextImpl -&gt; addView -&gt; doAddViewæ¯ä¸€ä¸ªDSLé£æ ¼çš„åŸŸç»è¿‡ä¸€è½®è§£æåˆ›å»ºå¥½Viewä¹‹åå¹¶åœ¨ä¹‹åaddè¿›å…¶ä¸Šä¸‹æ–‡ï¼ŒåŒæ—¶åˆ¤æ–­å…¶ä¸Šä¸‹æ–‡å¦‚æœæ˜¯Activityåˆ™setContentViewä½œä¸ºæ ¹èŠ‚ç‚¹ï¼ˆå¯¹äºå†…éƒ¨Viewåˆ™æ˜¯åˆ¤æ–­ViewManageræ˜¯ViewGroup or AnkoContextï¼‰ é€šè¿‡è¿™ç§æ–¹å¼å®ç°ï¼Œæ™®é€šçš„onCreateä¸­çš„ç›´æ¥ä½¿ç”¨viewGroup &amp; è‡ªå®šä¹‰UIç»§æ‰¿AnkoComponent ä¸¤ç§æ–¹æ¡ˆã€‚</li>
</ul>
<h3 id="æ•´ä½“æ—¶åºå›¾">æ•´ä½“æ—¶åºå›¾</h3>
<p><img src="https://ws3.sinaimg.cn/large/006tKfTcgy1fl8m3hvgraj31h80u03zm.jpg" alt="">
å¦‚ä¸Šè¿°æ—¶åºå›¾æ‰€ç¤ºï¼ŒViewçš„åˆ›å»ºä¸€å±‚ä¸€å±‚çš„ä¼ é€’ä¸‹å»ï¼Œå…¶ä¸­å…±æœ‰ä¸‰ç§æƒ…å†µï¼Œå³åˆ›å»ºViewçš„ä¸‰ç§ä¸Šä¸‹æ–‡ï¼š</p>
<ul>
<li>Activityï¼Œåœ¨Activityçš„onCreateä¸­è°ƒç”¨ï¼Œåˆ¤æ–­åˆ°æœ€åé€šè¿‡setContentViewæ¥å¡«å……æ•´ä¸ªå¸ƒå±€</li>
<li>Context &amp; Fragmentï¼Œåœ¨å…¶ä»–åœºæ™¯ä¸‹åˆ›å»ºçš„Viewï¼Œå¯ç›´æ¥é€šè¿‡UI { } åŸŸç”Ÿæˆç›¸åº”çš„View</li>
<li>AnkoContextï¼Œåœ¨è‡ªå®šä¹‰AnkoComponentä¸­çš„createViewæ–¹æ³•ä¸­å®šä¹‰</li>
</ul>
<p>å…¶ä¸­ç¬¬Næ­¥å¼€å§‹ï¼Œå³éœ€è¦æ ¹æ®ä¸Šä¸‹æ–‡çš„ä¸åŒè¿›å…¥çš„æ·±åº¦ä¸åŒï¼Œä½†æœ€ç»ˆéƒ½æ˜¯è¿”å›Viewï¼ˆä¸­é—´å¯èƒ½ä¼šè¿›è¡ŒsetContentViewæ“ä½œï¼‰</p>
<h2 id="thanks-to">Thanks To</h2>
<p><a href="https://github.com/Kotlin/anko/wiki/Anko-Layouts#why-anko-layouts">githubè¯´æ˜</a></p>
<p><a href="http://kotlinlang.org/docs/reference/lambdas.html">Kotlinå®˜æ–¹æ–‡æ¡£</a></p>
<p><a href="http://www.jianshu.com/p/6dca03569c09">Ankoçš„æºç è§£æ</a></p>
]]></content>
    </entry>
</feed>